const a4_0x1f13af=a4_0x19e1;(function(_0x43f2a0,_0x181698){const _0x5f21a1=a4_0x19e1,_0x5118c3=_0x43f2a0();while(!![]){try{const _0x4cd5c7=-parseInt(_0x5f21a1(0x1dc))/0x1*(parseInt(_0x5f21a1(0x1cb))/0x2)+-parseInt(_0x5f21a1(0x1da))/0x3+-parseInt(_0x5f21a1(0x1e2))/0x4*(parseInt(_0x5f21a1(0x1e8))/0x5)+parseInt(_0x5f21a1(0x1ce))/0x6+-parseInt(_0x5f21a1(0x1d5))/0x7+-parseInt(_0x5f21a1(0x1c3))/0x8*(-parseInt(_0x5f21a1(0x1eb))/0x9)+parseInt(_0x5f21a1(0x1de))/0xa;if(_0x4cd5c7===_0x181698)break;else _0x5118c3['push'](_0x5118c3['shift']());}catch(_0x12d912){_0x5118c3['push'](_0x5118c3['shift']());}}}(a4_0x1530,0x51f95));const requiredParam=require(a4_0x1f13af(0x1d1)),DBModel=require(a4_0x1f13af(0x1d0)),generateUUID=require(a4_0x1f13af(0x1e1)),{TableNotFoundError,GenericTableError}=require(a4_0x1f13af(0x1ca)),db=new DBModel();function buildTmpBulkBatchTableCreateQuery(_0x72c4a8=requiredParam('bulkBatchTableName')){const _0x423514=a4_0x1f13af;console[_0x423514(0x1e3)](_0x423514(0x1e5)+_0x72c4a8);const _0x1d19b0=_0x423514(0x1dd),_0x10e73b=db[_0x423514(0x1d4)](_0x423514(0x1d8),_0x1d19b0,_0x72c4a8);return console[_0x423514(0x1e3)](_0x423514(0x1e6)+_0x10e73b),_0x10e73b;}async function createTmpBulkBatchTable(){const _0x47502d=a4_0x1f13af,_0x22ddbf=_0x47502d(0x1d6)+generateUUID(![]),_0x14170f=buildTmpBulkBatchTableCreateQuery(_0x22ddbf),_0x1252d3=await db['createQuery'](_0x14170f);return _0x22ddbf;}function a4_0x1530(){const _0x5a7825=['SELECT\x20*\x20from\x20%I.%I;','CREATE\x20TABLE\x20%I.%I\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20sfid\x20varchar(18),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20json_record\x20text,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20PRIMARY\x20KEY(sfid)\x0a\x20\x20\x20\x20\x20\x20\x20\x20);','length','1364457YgoJFe','stringify','315313YGHOeF','cache','14479390LHomJz','push','json_record','../../../utils/generate-uuid','188oIjTJJ','log','Error\x20running\x20query\x20on\x20','buildTmpBulkBatchTableCreateQuery\x20invoked\x20with\x20params\x20=>\x20bulkBatchTableName=','Generated\x20tmp\x20bulk\x20batch\x20createQueryString\x20->\x20','getQuery','6930zgXVMu','error','shift','27mOgqfZ','message','parse','986360vYGqdJ','DROP\x20TABLE\x20IF\x20EXISTS\x20%I.%I;','code','rows','createQuery','Tmp\x20bulk\x20batch\x20insert\x20query\x20generated:\x20','42P01','../../../errors','4tZOHtN','batchRecords','dropQuery','1766220TYLygk','\x20in\x20retrieveBulkBatchRecords:\x20','../../../models/database','../../../utils/required-param','slice','bulkBatchTableName','format','4380894cDPKxM','_bt_'];a4_0x1530=function(){return _0x5a7825;};return a4_0x1530();}function a4_0x19e1(_0x36a490,_0x3ffc56){const _0x153064=a4_0x1530();return a4_0x19e1=function(_0x19e17c,_0x443b80){_0x19e17c=_0x19e17c-0x1c3;let _0x57f432=_0x153064[_0x19e17c];return _0x57f432;},a4_0x19e1(_0x36a490,_0x3ffc56);}async function dropTmpBulkBatchTable(_0x39676d){const _0x357218=a4_0x1f13af,_0x76ba8a=db[_0x357218(0x1d4)](_0x357218(0x1c4),'cache',_0x39676d),_0x1e0a47=await db[_0x357218(0x1cd)](_0x76ba8a);return _0x1e0a47;}async function loadTmpBulkBatchTable(_0xaa04e=requiredParam(a4_0x1f13af(0x1d3)),_0x1a5af9=requiredParam(a4_0x1f13af(0x1cc))){const _0x2b1391=a4_0x1f13af,_0x5847ea=[];while(_0x1a5af9[_0x2b1391(0x1d9)]){const _0x290d2a=_0x1a5af9[_0x2b1391(0x1ea)]();_0x5847ea[_0x2b1391(0x1df)]([_0x290d2a['id'],JSON[_0x2b1391(0x1db)](_0x290d2a)]);}const _0x58d0d9=db[_0x2b1391(0x1d4)]('INSERT\x20INTO\x20%I.%I\x20(sfid,\x20json_record)\x20VALUES\x20%L','cache',_0xaa04e,_0x5847ea);console[_0x2b1391(0x1e3)](_0x2b1391(0x1c8)+_0x58d0d9[_0x2b1391(0x1d2)](0x0,0xc8));const _0x11f1dd=await db[_0x2b1391(0x1c7)](_0x58d0d9);return _0x11f1dd;}async function retrieveBulkBatchRecords(_0xd53b60=requiredParam('bulkBatchTableName')){const _0x514c0f=a4_0x1f13af,_0x43fba8=db[_0x514c0f(0x1d4)](_0x514c0f(0x1d7),_0x514c0f(0x1dd),_0xd53b60);try{const _0x41bb85=await db[_0x514c0f(0x1e7)](_0x43fba8),_0x4ea2de=[];while(_0x41bb85[_0x514c0f(0x1c6)][_0x514c0f(0x1d9)]){const _0xd403ab=_0x41bb85[_0x514c0f(0x1c6)][_0x514c0f(0x1ea)](),_0x38a14a=JSON[_0x514c0f(0x1ed)](_0xd403ab[_0x514c0f(0x1e0)]);_0x4ea2de[_0x514c0f(0x1df)](_0x38a14a);}return _0x4ea2de;}catch(_0xcb0a63){console[_0x514c0f(0x1e9)](_0x514c0f(0x1e4)+_0xd53b60+_0x514c0f(0x1cf),_0xcb0a63);if(_0xcb0a63[_0x514c0f(0x1c5)]&&_0xcb0a63['code']===_0x514c0f(0x1c9))throw new TableNotFoundError(_0xcb0a63[_0x514c0f(0x1ec)]);else throw new GenericTableError(_0xcb0a63);}}module['exports']={'createTmpBulkBatchTable':createTmpBulkBatchTable,'dropTmpBulkBatchTable':dropTmpBulkBatchTable,'loadTmpBulkBatchTable':loadTmpBulkBatchTable,'retrieveBulkBatchRecords':retrieveBulkBatchRecords};