function a9_0xa5fe(){const _0x3bc188=['11SijTZQ','One\x20or\x20more\x20intermediary\x20jobs\x20have\x20stalled.','queue','\x20has\x20failed\x20with\x20result:\x20','error','\x20id:','submitted','\x20objectName:','../../../utils/required-param','stalled','320930HDWIgE','add','\x20!!!!!!','\x20attemptsMade:','retentionType:','\x20with\x20jobOptions:\x20','policyName','6713364QgpnRX','objectName','name','id:','167130aZnjfx','opts','jobData','../../../settings','data','\x20-\x20jobExtract:\x20','\x20and\x20jobData(sliced\x20200):\x20','attemptsMade','batchRecords','17282277aORkkG','failed','attempts','8OatYEC','\x20retentionType:','!!!\x20Job\x20type:','failedReason','8097190cwyaYZ','Phase\x20Completion','exports','recordRetention','Error\x20submitting\x20jobType:\x20','INCREMENT','successful_sub','executionId','2463717AWBXGs','stringify','\x20schemaObject:','schemaObject','../../../errors/job-errors','failed_sub','../../../models/salesforce','insertRunLog','log','./job-counters','Error','9709406GISxlg','jobType','failed_all'];a9_0xa5fe=function(){return _0x3bc188;};return a9_0xa5fe();}function a9_0x4968(_0x25218a,_0x2a1e04){const _0xa5feaf=a9_0xa5fe();return a9_0x4968=function(_0x49685a,_0x1c1f2a){_0x49685a=_0x49685a-0x139;let _0x165799=_0xa5feaf[_0x49685a];return _0x165799;},a9_0x4968(_0x25218a,_0x2a1e04);}const a9_0x15064e=a9_0x4968;(function(_0x4744f8,_0x1f73c1){const _0x364d02=a9_0x4968,_0x278102=_0x4744f8();while(!![]){try{const _0x3287a7=-parseInt(_0x364d02(0x146))/0x1*(-parseInt(_0x364d02(0x150))/0x2)+-parseInt(_0x364d02(0x173))/0x3+-parseInt(_0x364d02(0x157))/0x4+-parseInt(_0x364d02(0x16b))/0x5+parseInt(_0x364d02(0x15b))/0x6+parseInt(_0x364d02(0x143))/0x7+-parseInt(_0x364d02(0x167))/0x8*(-parseInt(_0x364d02(0x164))/0x9);if(_0x3287a7===_0x1f73c1)break;else _0x278102['push'](_0x278102['shift']());}catch(_0x1e3d6f){_0x278102['push'](_0x278102['shift']());}}}(a9_0xa5fe,0xef90f));const requiredParam=require(a9_0x15064e(0x14e)),{globalJobSettings,retryJobSettings}=require(a9_0x15064e(0x15e)),{JobSubmissionError}=require(a9_0x15064e(0x13c)),SalesforceModel=require(a9_0x15064e(0x13e)),{updateJobCounter}=require(a9_0x15064e(0x141)),salesforce=new SalesforceModel();async function handleJobSubmission({queue:queue=requiredParam(a9_0x15064e(0x148)),jobType:jobType=requiredParam(a9_0x15064e(0x144)),jobData:jobData=requiredParam('jobData'),enableRetries:enableRetries=![],bullJobOptOverrides:bullJobOptOverrides=null,skipCounters:skipCounters=![],noJobName:noJobName=![]}){const _0x31a235=a9_0x15064e,_0x23a639=enableRetries?retryJobSettings:null,_0x26c963={...globalJobSettings,..._0x23a639,...bullJobOptOverrides};try{if(!skipCounters)await updateJobCounter(jobData[_0x31a235(0x172)],jobType,_0x31a235(0x14c),'INCREMENT');let _0x5b2d31;noJobName?_0x5b2d31=await queue['add'](jobData,_0x26c963):_0x5b2d31=await queue[_0x31a235(0x151)](jobType,jobData,_0x26c963);if(!skipCounters)await updateJobCounter(jobData[_0x31a235(0x172)],jobType,_0x31a235(0x171),_0x31a235(0x170));return _0x5b2d31;}catch(_0x1d668f){if(!skipCounters)await updateJobCounter(jobData[_0x31a235(0x172)],jobType,_0x31a235(0x13d),_0x31a235(0x170));console[_0x31a235(0x14a)](_0x31a235(0x16f)+jobType+_0x31a235(0x155)+JSON['stringify'](_0x26c963)+_0x31a235(0x161)+JSON[_0x31a235(0x139)](jobData)['slice'](0x0,0xc8));throw new JobSubmissionError('Error\x20submitting\x20jobType:\x20'+jobType);}}async function handleJobCompleted(_0x37c545,_0x5b1b3a){const _0x5c3673=a9_0x15064e;console[_0x5c3673(0x140)]('Job\x20type:'+_0x37c545['name']+_0x5c3673(0x14b)+_0x37c545['id']+'\x20completed!'+(_0x37c545['data'][_0x5c3673(0x158)]?_0x5c3673(0x14d)+_0x37c545[_0x5c3673(0x15f)][_0x5c3673(0x158)]:'')+(_0x37c545[_0x5c3673(0x15f)][_0x5c3673(0x13b)]?_0x5c3673(0x13a)+_0x37c545[_0x5c3673(0x15f)][_0x5c3673(0x13b)]:'')+(_0x37c545[_0x5c3673(0x15f)][_0x5c3673(0x16e)]?_0x5c3673(0x168)+_0x37c545['data'][_0x5c3673(0x16e)]:'')),await updateJobCounter(_0x37c545[_0x5c3673(0x15f)]['executionId'],_0x37c545['name'],'completed',_0x5c3673(0x170));}async function handleJobFailure(_0xd8cfac,_0x2855ad,_0x3b9ed3,_0x2f2352){const _0x17766d=a9_0x15064e,_0x139342={'jobName':_0xd8cfac[_0x17766d(0x159)],'jobQueueName':_0xd8cfac[_0x17766d(0x148)]['name'],'jobOpts':_0xd8cfac[_0x17766d(0x15c)],'jobData':_0xd8cfac[_0x17766d(0x15f)],'jobFailedReason':_0xd8cfac['failedReason']};_0x139342[_0x17766d(0x15d)][_0x17766d(0x163)]='OMITTED',console[_0x17766d(0x14a)](_0x17766d(0x169)+_0xd8cfac[_0x17766d(0x159)]+_0x17766d(0x14b)+_0xd8cfac['id']+(_0xd8cfac[_0x17766d(0x15f)][_0x17766d(0x13b)]?_0x17766d(0x13a)+_0xd8cfac['data']['schemaObject']:'')+'\x20'+(_0xd8cfac['data'][_0x17766d(0x16e)]?'retentionType:'+_0xd8cfac['data'][_0x17766d(0x16e)]:'')+_0x17766d(0x149)+JSON[_0x17766d(0x139)](_0x2855ad)+_0x17766d(0x160),_0x139342),console[_0x17766d(0x140)](_0x17766d(0x15a)+_0xd8cfac['id']+_0x17766d(0x153)+_0xd8cfac[_0x17766d(0x162)]+'\x20attempts:'+_0xd8cfac[_0x17766d(0x15c)][_0x17766d(0x166)]+'\x20attemptsRemaing:'+(_0xd8cfac[_0x17766d(0x15c)]['attempts']-_0xd8cfac[_0x17766d(0x162)])),await updateJobCounter(_0xd8cfac['data'][_0x17766d(0x172)],_0xd8cfac[_0x17766d(0x159)],_0x17766d(0x165),_0x17766d(0x170)),_0xd8cfac[_0x17766d(0x162)]>=_0xd8cfac[_0x17766d(0x15c)]['attempts']&&(console[_0x17766d(0x14a)]('!!!!!!\x20MAXIMUM\x20RETRIES\x20REACHED\x20for\x20id:'+_0xd8cfac['id']+_0x17766d(0x152)),await updateJobCounter(_0xd8cfac[_0x17766d(0x15f)][_0x17766d(0x172)],_0xd8cfac[_0x17766d(0x159)],_0x17766d(0x145),_0x17766d(0x170)),await salesforce[_0x17766d(0x13f)](_0xd8cfac[_0x17766d(0x15f)][_0x17766d(0x172)],_0xd8cfac[_0x17766d(0x15f)][_0x17766d(0x156)],_0x17766d(0x142),_0x3b9ed3,_0x2f2352));}async function handleJobStalled(_0x43c678){const _0x550bef=a9_0x15064e,_0x54e9c5={'jobName':_0x43c678[_0x550bef(0x159)],'jobQueueName':_0x43c678[_0x550bef(0x148)][_0x550bef(0x159)],'jobOpts':_0x43c678[_0x550bef(0x15c)],'jobData':_0x43c678[_0x550bef(0x15f)],'jobFailedReason':_0x43c678[_0x550bef(0x16a)]};console[_0x550bef(0x14a)](_0x550bef(0x169)+_0x43c678[_0x550bef(0x159)]+'\x20id:'+_0x43c678['id']+(_0x43c678[_0x550bef(0x15f)][_0x550bef(0x13b)]?_0x550bef(0x13a)+_0x43c678[_0x550bef(0x15f)][_0x550bef(0x13b)]:'')+'\x20'+(_0x43c678[_0x550bef(0x15f)]['recordRetention']?_0x550bef(0x154)+_0x43c678[_0x550bef(0x15f)]['recordRetention']:'')+'\x20has\x20stalled!\x20-\x20jobExtract:\x20',_0x54e9c5),await salesforce[_0x550bef(0x13f)](_0x43c678[_0x550bef(0x15f)][_0x550bef(0x172)],_0x43c678['data'][_0x550bef(0x156)],'Error',_0x550bef(0x16c),_0x550bef(0x147)),await updateJobCounter(_0x43c678[_0x550bef(0x15f)]['executionId'],_0x43c678[_0x550bef(0x159)],_0x550bef(0x14f),_0x550bef(0x170));}module[a9_0x15064e(0x16d)]={'handleJobSubmission':handleJobSubmission,'handleJobCompleted':handleJobCompleted,'handleJobFailure':handleJobFailure,'handleJobStalled':handleJobStalled};