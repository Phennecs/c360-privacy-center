const a9_0x4322ed=a9_0x3c09;(function(_0x102650,_0x1fb577){const _0x2216a8=a9_0x3c09,_0x1f981b=_0x102650();while(!![]){try{const _0x5859e8=parseInt(_0x2216a8(0x128))/0x1+-parseInt(_0x2216a8(0x11b))/0x2*(parseInt(_0x2216a8(0x112))/0x3)+-parseInt(_0x2216a8(0x125))/0x4+parseInt(_0x2216a8(0x13e))/0x5*(-parseInt(_0x2216a8(0x124))/0x6)+-parseInt(_0x2216a8(0x119))/0x7+-parseInt(_0x2216a8(0x13b))/0x8*(-parseInt(_0x2216a8(0x10c))/0x9)+parseInt(_0x2216a8(0x12c))/0xa;if(_0x5859e8===_0x1fb577)break;else _0x1f981b['push'](_0x1f981b['shift']());}catch(_0x18edeb){_0x1f981b['push'](_0x1f981b['shift']());}}}(a9_0x54eb,0x1e03b));const requiredParam=require('../../../utils/required-param'),{globalJobSettings,retryJobSettings}=require(a9_0x4322ed(0x132)),{JobSubmissionError}=require(a9_0x4322ed(0x136)),SalesforceModel=require(a9_0x4322ed(0x11a)),{updateJobCounter}=require(a9_0x4322ed(0x10f)),salesforce=new SalesforceModel();async function handleJobSubmission({queue:queue=requiredParam(a9_0x4322ed(0x13a)),jobType:jobType=requiredParam('jobType'),jobData:jobData=requiredParam(a9_0x4322ed(0x114)),enableRetries:enableRetries=![],bullJobOptOverrides:bullJobOptOverrides=null,skipCounters:skipCounters=![],noJobName:noJobName=![]}){const _0xac8747=a9_0x4322ed,_0x4978be=enableRetries?retryJobSettings:null,_0x5f30b1={...globalJobSettings,..._0x4978be,...bullJobOptOverrides};try{if(!skipCounters)await updateJobCounter(jobData['executionId'],jobType,_0xac8747(0x12b),_0xac8747(0x123));let _0xbdddb2;noJobName?_0xbdddb2=await queue['add'](jobData,_0x5f30b1):_0xbdddb2=await queue[_0xac8747(0x108)](jobType,jobData,_0x5f30b1);if(!skipCounters)await updateJobCounter(jobData['executionId'],jobType,'successful_sub','INCREMENT');return _0xbdddb2;}catch(_0x298ca4){if(!skipCounters)await updateJobCounter(jobData[_0xac8747(0x138)],jobType,_0xac8747(0x13d),_0xac8747(0x123));console['error'](_0xac8747(0x11e)+jobType+_0xac8747(0x129)+JSON[_0xac8747(0x10a)](_0x5f30b1)+_0xac8747(0x113)+JSON[_0xac8747(0x10a)](jobData)[_0xac8747(0x131)](0x0,0xc8));throw new JobSubmissionError('Error\x20submitting\x20jobType:\x20'+jobType);}}async function handleJobCompleted(_0x2d74bc,_0x4a91d9){const _0x53e82c=a9_0x4322ed;console[_0x53e82c(0x10b)](_0x53e82c(0x139)+_0x2d74bc[_0x53e82c(0x103)]+'\x20id:'+_0x2d74bc['id']+_0x53e82c(0x115)+(_0x2d74bc[_0x53e82c(0x12f)][_0x53e82c(0x11c)]?'\x20objectName:'+_0x2d74bc[_0x53e82c(0x12f)][_0x53e82c(0x11c)]:'')+(_0x2d74bc[_0x53e82c(0x12f)][_0x53e82c(0x10d)]?_0x53e82c(0x120)+_0x2d74bc[_0x53e82c(0x12f)][_0x53e82c(0x10d)]:'')+(_0x2d74bc[_0x53e82c(0x12f)]['recordRetention']?_0x53e82c(0x134)+_0x2d74bc[_0x53e82c(0x12f)][_0x53e82c(0x107)]:'')),await updateJobCounter(_0x2d74bc[_0x53e82c(0x12f)][_0x53e82c(0x138)],_0x2d74bc[_0x53e82c(0x103)],_0x53e82c(0x111),_0x53e82c(0x123));}function a9_0x3c09(_0x2f9030,_0x397d0f){const _0x54ebfc=a9_0x54eb();return a9_0x3c09=function(_0x3c09be,_0x4d6ca8){_0x3c09be=_0x3c09be-0x103;let _0x453db1=_0x54ebfc[_0x3c09be];return _0x453db1;},a9_0x3c09(_0x2f9030,_0x397d0f);}function a9_0x54eb(){const _0x1d70f0=['45UNJLMD','name','\x20attempts:','!!!!!!\x20MAXIMUM\x20RETRIES\x20REACHED\x20for\x20id:','\x20has\x20failed\x20with\x20result:\x20','recordRetention','add','\x20!!!!!!','stringify','log','994059urtFBO','schemaObject','OMITTED','./job-counters','stalled','completed','3KGQKiY','\x20and\x20jobData(sliced\x20200):\x20','jobData','\x20completed!','!!!\x20Job\x20type:','\x20has\x20stalled!\x20-\x20jobExtract:\x20','attempts','1169378yYbltk','../../../models/salesforce','301934kISgAc','objectName','policyName','Error\x20submitting\x20jobType:\x20','\x20-\x20jobExtract:\x20','\x20schemaObject:','insertRunLog','id:','INCREMENT','88818RddTXi','208152nDkFuK','\x20attemptsMade:','attemptsMade','57880MZQmTA','\x20with\x20jobOptions:\x20','One\x20or\x20more\x20intermediary\x20jobs\x20have\x20stalled.','submitted','4578940FxdpBG','opts','retentionType:','data','Phase\x20Completion','slice','../../../settings','error','\x20retentionType:','\x20id:','../../../errors/job-errors','failedReason','executionId','Job\x20type:','queue','8FXgXwc','\x20attemptsRemaing:','failed_sub'];a9_0x54eb=function(){return _0x1d70f0;};return a9_0x54eb();}async function handleJobFailure(_0x449ea7,_0x1e73ab,_0x3acdb4,_0x4182b3){const _0x503d69=a9_0x4322ed,_0xeb921={'jobName':_0x449ea7[_0x503d69(0x103)],'jobQueueName':_0x449ea7[_0x503d69(0x13a)]['name'],'jobOpts':_0x449ea7['opts'],'jobData':_0x449ea7[_0x503d69(0x12f)],'jobFailedReason':_0x449ea7[_0x503d69(0x137)]};_0xeb921[_0x503d69(0x114)]['batchRecords']=_0x503d69(0x10e),console[_0x503d69(0x133)](_0x503d69(0x116)+_0x449ea7[_0x503d69(0x103)]+_0x503d69(0x135)+_0x449ea7['id']+(_0x449ea7[_0x503d69(0x12f)][_0x503d69(0x10d)]?'\x20schemaObject:'+_0x449ea7['data'][_0x503d69(0x10d)]:'')+'\x20'+(_0x449ea7[_0x503d69(0x12f)][_0x503d69(0x107)]?'retentionType:'+_0x449ea7[_0x503d69(0x12f)]['recordRetention']:'')+_0x503d69(0x106)+JSON[_0x503d69(0x10a)](_0x1e73ab)+_0x503d69(0x11f),_0xeb921),console[_0x503d69(0x10b)](_0x503d69(0x122)+_0x449ea7['id']+_0x503d69(0x126)+_0x449ea7[_0x503d69(0x127)]+_0x503d69(0x104)+_0x449ea7[_0x503d69(0x12d)][_0x503d69(0x118)]+_0x503d69(0x13c)+(_0x449ea7[_0x503d69(0x12d)][_0x503d69(0x118)]-_0x449ea7[_0x503d69(0x127)])),await updateJobCounter(_0x449ea7[_0x503d69(0x12f)]['executionId'],_0x449ea7[_0x503d69(0x103)],'failed',_0x503d69(0x123)),_0x449ea7[_0x503d69(0x127)]>=_0x449ea7[_0x503d69(0x12d)][_0x503d69(0x118)]&&(console[_0x503d69(0x133)](_0x503d69(0x105)+_0x449ea7['id']+_0x503d69(0x109)),await updateJobCounter(_0x449ea7[_0x503d69(0x12f)][_0x503d69(0x138)],_0x449ea7[_0x503d69(0x103)],'failed_all',_0x503d69(0x123)),await salesforce['insertRunLog'](_0x449ea7[_0x503d69(0x12f)]['executionId'],_0x449ea7[_0x503d69(0x12f)][_0x503d69(0x11d)],'Error',_0x3acdb4,_0x4182b3));}async function handleJobStalled(_0x10597d){const _0x987b5=a9_0x4322ed,_0x3bf3ad={'jobName':_0x10597d['name'],'jobQueueName':_0x10597d[_0x987b5(0x13a)][_0x987b5(0x103)],'jobOpts':_0x10597d['opts'],'jobData':_0x10597d[_0x987b5(0x12f)],'jobFailedReason':_0x10597d[_0x987b5(0x137)]};console[_0x987b5(0x133)](_0x987b5(0x116)+_0x10597d['name']+_0x987b5(0x135)+_0x10597d['id']+(_0x10597d[_0x987b5(0x12f)][_0x987b5(0x10d)]?_0x987b5(0x120)+_0x10597d[_0x987b5(0x12f)]['schemaObject']:'')+'\x20'+(_0x10597d[_0x987b5(0x12f)][_0x987b5(0x107)]?_0x987b5(0x12e)+_0x10597d['data'][_0x987b5(0x107)]:'')+_0x987b5(0x117),_0x3bf3ad),await salesforce[_0x987b5(0x121)](_0x10597d[_0x987b5(0x12f)][_0x987b5(0x138)],_0x10597d[_0x987b5(0x12f)][_0x987b5(0x11d)],'Error',_0x987b5(0x130),_0x987b5(0x12a)),await updateJobCounter(_0x10597d[_0x987b5(0x12f)][_0x987b5(0x138)],_0x10597d['name'],_0x987b5(0x110),'INCREMENT');}module['exports']={'handleJobSubmission':handleJobSubmission,'handleJobCompleted':handleJobCompleted,'handleJobFailure':handleJobFailure,'handleJobStalled':handleJobStalled};