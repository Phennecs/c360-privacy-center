function a3_0x1fe6(_0x18a4e1,_0x1633de){const _0x1780de=a3_0x1780();return a3_0x1fe6=function(_0x1fe62c,_0x1142a6){_0x1fe62c=_0x1fe62c-0x1b9;let _0x141d21=_0x1780de[_0x1fe62c];return _0x141d21;},a3_0x1fe6(_0x18a4e1,_0x1633de);}const a3_0x382493=a3_0x1fe6;(function(_0x11ca6b,_0x1164f2){const _0x42c027=a3_0x1fe6,_0x31c764=_0x11ca6b();while(!![]){try{const _0x3175e6=parseInt(_0x42c027(0x209))/0x1*(parseInt(_0x42c027(0x1dd))/0x2)+-parseInt(_0x42c027(0x1d6))/0x3*(-parseInt(_0x42c027(0x1e9))/0x4)+parseInt(_0x42c027(0x1f1))/0x5*(-parseInt(_0x42c027(0x22c))/0x6)+parseInt(_0x42c027(0x236))/0x7+parseInt(_0x42c027(0x226))/0x8*(parseInt(_0x42c027(0x227))/0x9)+-parseInt(_0x42c027(0x229))/0xa*(-parseInt(_0x42c027(0x208))/0xb)+-parseInt(_0x42c027(0x1c9))/0xc;if(_0x3175e6===_0x1164f2)break;else _0x31c764['push'](_0x31c764['shift']());}catch(_0x51b2ad){_0x31c764['push'](_0x31c764['shift']());}}}(a3_0x1780,0x4ae4e));const sizeof=require(a3_0x382493(0x21d)),requiredParam=require(a3_0x382493(0x203)),{skipSFDeletes}=require('../../settings'),{updateBulkCounters}=require(a3_0x382493(0x225)),{handleJobSubmission}=require(a3_0x382493(0x1bd)),{JobSubmissionError,BulkSingleRecordLimitsExceededError}=require(a3_0x382493(0x23b)),Bulk2Job=require('../../models/salesforce/bulk2-job'),{insertBulkJob,insertBulkJobErrors,insertUniqBulkJobErrorsPerObj}=require(a3_0x382493(0x1d3)),{acquireLock,releaseLock,LOCK_TYPES}=require(a3_0x382493(0x20a)),{retrieveBulkBatchRecords,dropTmpBulkBatchTable,createTmpBulkBatchTable,loadTmpBulkBatchTable}=require(a3_0x382493(0x1fa));class BulkUpdater{constructor({job:job=requiredParam(a3_0x382493(0x1f6)),salesforce:salesforce=requiredParam(a3_0x382493(0x1fb)),db:db=requiredParam('db'),modifyQueue:modifyQueue=requiredParam(a3_0x382493(0x1df)),bulkQueue:bulkQueue=requiredParam(a3_0x382493(0x1d2)),upStateQueue:upStateQueue=requiredParam(a3_0x382493(0x212))}){const _0x5c8740=a3_0x382493;this[_0x5c8740(0x213)](job[_0x5c8740(0x22d)]),this[_0x5c8740(0x1f6)]=job,this[_0x5c8740(0x1fb)]=salesforce,this['db']=db,this[_0x5c8740(0x1df)]=modifyQueue,this[_0x5c8740(0x212)]=upStateQueue,this[_0x5c8740(0x22d)]=this[_0x5c8740(0x1f6)][_0x5c8740(0x22d)],this[_0x5c8740(0x1ee)]=this['job'][_0x5c8740(0x22d)][_0x5c8740(0x1ee)],this[_0x5c8740(0x22f)]=this[_0x5c8740(0x22d)][_0x5c8740(0x22f)][_0x5c8740(0x1fe)]();if(this['data'][_0x5c8740(0x1be)])this['logPrefix']='(RETRY)\x20';else this['data'][_0x5c8740(0x1d7)]?this[_0x5c8740(0x1f5)]=_0x5c8740(0x1ec):this[_0x5c8740(0x1f5)]='';}[a3_0x382493(0x213)]({policyWrapper:policyWrapper=requiredParam(a3_0x382493(0x238)),executionId:executionId=requiredParam(a3_0x382493(0x22e)),policyName:policyName=requiredParam(a3_0x382493(0x232)),objectName:objectName=requiredParam('objectName'),objectHash:objectHash=requiredParam('objectHash'),objectId:objectId=requiredParam(a3_0x382493(0x1cc)),recordRetention:recordRetention=requiredParam(a3_0x382493(0x22f)),hardDelete:_0xf7c54e,bulkBatchTableName:bulkBatchTableName=requiredParam(a3_0x382493(0x23a)),batchRecordCount:batchRecordCount=requiredParam('batchRecordCount'),isRetry:_0x47652d,isUnproccRetry:_0x2da98b}){}async[a3_0x382493(0x1bb)](){const _0x323f2b=a3_0x382493;try{const _0x37461e=await retrieveBulkBatchRecords(this[_0x323f2b(0x22d)]['bulkBatchTableName']),_0xef4127=this[_0x323f2b(0x20b)](_0x37461e),_0x1378a4=await this[_0x323f2b(0x1cf)](_0xef4127);console[_0x323f2b(0x1d8)](this[_0x323f2b(0x1f5)]+_0x323f2b(0x214)+this[_0x323f2b(0x22d)]['objectName']+'\x20+++++\x0a'+JSON[_0x323f2b(0x21b)](_0x1378a4,undefined,0x2)[_0x323f2b(0x230)](0x0,0x7d0)+_0x323f2b(0x1ed)),await this[_0x323f2b(0x21e)](_0x1378a4);const _0x6aa5a2=await this[_0x323f2b(0x1c6)](_0x1378a4),_0x555022=await this[_0x323f2b(0x21a)](_0x1378a4),[_0x3ec40a,_0x241b24]=await this[_0x323f2b(0x1da)](_0x1378a4),_0x213a48=await this[_0x323f2b(0x207)](_0x1378a4),_0x12c836=await dropTmpBulkBatchTable(this['data'][_0x323f2b(0x23a)]);return{'success':!![],'enableEndPhaseRetries':_0x241b24};}catch(_0x40140c){return console[_0x323f2b(0x1eb)](this[_0x323f2b(0x1f5)]+_0x323f2b(0x223),_0x40140c),{'success':![],'error':_0x40140c};}}[a3_0x382493(0x1d4)]({bytes:_0x2f1033,charCount:_0x1966a7,recordCount:_0x465793}){const _0x2d990b=a3_0x382493;if(_0x2f1033>0x5f5e100)return console['warn'](this[_0x2d990b(0x1f5)]+_0x2d990b(0x1e3)+_0x2f1033+_0x2d990b(0x23d)),!![];return![];}['getRecordOrBatchStats'](_0x188479){const _0x4d6636=a3_0x382493;return{'bytes':sizeof(_0x188479),'charCount':JSON[_0x4d6636(0x21b)](_0x188479)[_0x4d6636(0x1f7)],'recordCount':Array[_0x4d6636(0x1bf)](_0x188479)?_0x188479[_0x4d6636(0x1f7)]:0x1};}['getFullRecordStats'](_0x10fc3c){const _0x1e4ab2=a3_0x382493;return{...this[_0x1e4ab2(0x1e0)](_0x10fc3c),'fieldCount':Object[_0x1e4ab2(0x1e4)](_0x10fc3c)[_0x1e4ab2(0x1f7)],'maxFieldCharCount':Math[_0x1e4ab2(0x217)](Object[_0x1e4ab2(0x205)](_0x10fc3c)[_0x1e4ab2(0x21f)](_0x419db9=>JSON[_0x1e4ab2(0x21b)](_0x419db9)[_0x1e4ab2(0x1f7)]))};}[a3_0x382493(0x1ea)](_0x43b7f5){const _0x44c6b4=a3_0x382493;return _0x44c6b4(0x1e2)+_0x43b7f5[_0x44c6b4(0x222)]+'\x20\x20megabytes:'+(_0x43b7f5[_0x44c6b4(0x1c0)]/0x400/0x400)['toFixed'](0x2)+'\x20\x20charCount:'+_0x43b7f5['charCount'];}[a3_0x382493(0x1db)](_0x33a293,_0x969344){const _0x8573d7=a3_0x382493;return!this[_0x8573d7(0x1d4)](this['addBatchStats'](_0x33a293,_0x969344));}['addBatchStats'](_0x38e1f4,_0xc55232){const _0x2b6214=a3_0x382493;return{'bytes':_0x38e1f4[_0x2b6214(0x1c0)]+_0xc55232[_0x2b6214(0x1c0)],'charCount':_0x38e1f4['charCount']+_0xc55232[_0x2b6214(0x1e8)],'recordCount':_0x38e1f4['recordCount']+_0xc55232[_0x2b6214(0x222)]};}['singleRecordExceedsLimits']({charCount:_0x13b008,fieldCount:_0x2b9f8c,maxFieldCharCount:_0x2e0057}){const _0x8b1684=a3_0x382493;if(_0x2b9f8c>0x1388)return console[_0x8b1684(0x1f4)](this[_0x8b1684(0x1f5)]+_0x8b1684(0x1e1)+_0x2b9f8c+_0x8b1684(0x1f0)),!![];if(_0x13b008>0x61698)return console[_0x8b1684(0x1f4)](this[_0x8b1684(0x1f5)]+_0x8b1684(0x1dc)+_0x13b008+_0x8b1684(0x1fc)),!![];if(_0x2e0057>0x7c9c)return console[_0x8b1684(0x1f4)](this[_0x8b1684(0x1f5)]+_0x8b1684(0x20e)+_0x2e0057+_0x8b1684(0x1f8)),!![];return![];}[a3_0x382493(0x233)](_0x15b70b){const _0x1a2021=a3_0x382493;return _0x15b70b[_0x1a2021(0x22b)](_0x293a2d=>!this[_0x1a2021(0x1d5)](this[_0x1a2021(0x21c)](_0x293a2d)));}[a3_0x382493(0x20b)](_0x502250){const _0x349b56=a3_0x382493,_0x13b6f2=this[_0x349b56(0x1e0)](_0x502250);console['log'](this[_0x349b56(0x1f5)]+_0x349b56(0x1b9)+this['data'][_0x349b56(0x228)]+_0x349b56(0x1c2)+this[_0x349b56(0x1ea)](_0x13b6f2));if(!this['allRecordsWithinRecordLimits'](_0x502250))throw new BulkSingleRecordLimitsExceededError(_0x13b6f2);if(!this['batchStatsExceedLimits'](_0x13b6f2))return[_0x502250];else console[_0x349b56(0x1d8)](this[_0x349b56(0x1f5)]+_0x349b56(0x1d0)+this[_0x349b56(0x22d)][_0x349b56(0x228)]);const _0x258cb8=[],_0x226635=()=>{return{'bytes':0x0,'charCount':0x0,'recordCount':0x0};};let _0x289676=[],_0x1ffb2d=_0x226635();while(_0x502250['length']){const _0x49172c=_0x502250[_0x349b56(0x221)](),_0x3a3ace=this[_0x349b56(0x1e0)](_0x49172c);if(!this[_0x349b56(0x1db)](_0x1ffb2d,_0x3a3ace)){if(!_0x289676['length'])throw new BulkSingleRecordLimitsExceededError(_0x3a3ace);_0x258cb8['push'](_0x289676),_0x289676=[],_0x1ffb2d=_0x226635();}_0x289676['push'](_0x49172c),_0x1ffb2d=this[_0x349b56(0x1e5)](_0x1ffb2d,_0x3a3ace);}return _0x289676[_0x349b56(0x1f7)]&&_0x258cb8['push'](_0x289676),_0x258cb8;}async[a3_0x382493(0x1cf)](_0x1d231d){const _0x4fd422=a3_0x382493,_0x2ea893=[];for(const _0x5af78a of _0x1d231d){const _0x109fa9=await this[_0x4fd422(0x1c4)](_0x5af78a);if(_0x109fa9)_0x2ea893['push'](_0x109fa9);else console[_0x4fd422(0x1f4)]('No\x20batchInfo\x20returned\x20from\x20submitBatchToSF()!');}return _0x2ea893;}async[a3_0x382493(0x1c4)](_0x152352){const _0x46110f=a3_0x382493;if(!_0x152352||!_0x152352[_0x46110f(0x1f7)])return;const _0x22d0f0=new Bulk2Job({'object':this['data'][_0x46110f(0x228)],'operation':this[_0x46110f(0x22f)]===_0x46110f(0x211)?this['data']['hardDelete']===!![]?_0x46110f(0x1d9):_0x46110f(0x211):this[_0x46110f(0x22f)]===_0x46110f(0x1c7)?_0x46110f(0x224):null,'externalIdFieldName':this[_0x46110f(0x22f)]===_0x46110f(0x211)?null:this[_0x46110f(0x22f)]===_0x46110f(0x1c7)?'id':null});try{if(this[_0x46110f(0x22d)][_0x46110f(0x1be)])await acquireLock(this['db'],LOCK_TYPES[_0x46110f(0x1cb)]);const _0x457921=await _0x22d0f0[_0x46110f(0x220)](_0x152352);return _0x457921;}finally{if(this[_0x46110f(0x22d)][_0x46110f(0x1be)])await releaseLock(this['db'],LOCK_TYPES['SERIAL_BULK']);}}async[a3_0x382493(0x20c)](_0x30eac2,_0x12d267){const _0x3ea76d=a3_0x382493;return await this[_0x3ea76d(0x1fb)]['bulkOperation'](_0x30eac2,_0x12d267,_0x3ea76d(0x211));}async['bulkUpdate'](_0x531675,_0x3064c8){const _0x7978f1=a3_0x382493;return await this['salesforce'][_0x7978f1(0x1ff)](_0x531675,_0x3064c8,_0x7978f1(0x231));}async[a3_0x382493(0x21e)](_0x1aa71a){const _0x5964ac=a3_0x382493;for(const _0xf978fb of _0x1aa71a){const {jobInfo:_0x2ddbce,results:_0x3a9792,coercedToStandardDelete:_0x1f1dfb}=_0xf978fb;if(_0x1f1dfb){const _0x47d823=_0x5964ac(0x1bc),_0x20866b=_0x5964ac(0x204),_0x50bdc6=await insertUniqBulkJobErrorsPerObj({'executionId':this['data'][_0x5964ac(0x22e)],'sobject':this[_0x5964ac(0x22d)][_0x5964ac(0x228)],'errorCode':_0x47d823,'fullError':_0x20866b});if(_0x50bdc6[_0x5964ac(0x1f9)][_0x5964ac(0x1f7)]){let _0xf6a3de=_0x5964ac(0x1ca)+this[_0x5964ac(0x22d)][_0x5964ac(0x228)]+_0x5964ac(0x1ce)+_0x47d823+_0x5964ac(0x219);console[_0x5964ac(0x1f4)](this[_0x5964ac(0x1f5)]+_0xf6a3de);const _0x5a93a5=await this['salesforce']['insertRunLog'](this[_0x5964ac(0x22d)][_0x5964ac(0x22e)],this['data']['policyName'],_0x5964ac(0x1c8),_0x5964ac(0x1c5),_0xf6a3de);}return;}}}async[a3_0x382493(0x1c6)](_0x43650f){const _0xb6793=a3_0x382493;let _0x43c108=0x0,_0x560e24=0x0,_0x25e725=0x0,_0x22ab1d=0x0;for(const _0x5d4862 of _0x43650f){const {jobInfo:_0x157483,results:_0x47a8e0,coercedToStandardDelete:_0x44ede9,initialCount:_0x29cbd1,missingFromResultSfids:_0x1ca5c3}=_0x5d4862;_0x47a8e0&&(_0x43c108+=_0x29cbd1,this[_0xb6793(0x22d)][_0xb6793(0x1be)]?(_0x560e24-=_0x47a8e0['successfulResults']['length'],_0x25e725+=_0x47a8e0[_0xb6793(0x20f)][_0xb6793(0x1f7)]):(_0x560e24+=_0x47a8e0['failedResults'][_0xb6793(0x1f7)]+_0x1ca5c3[_0xb6793(0x1f7)],_0x25e725+=_0x47a8e0[_0xb6793(0x20f)][_0xb6793(0x1f7)],_0x22ab1d+=_0x47a8e0[_0xb6793(0x235)][_0xb6793(0x1f7)]+_0x47a8e0['successfulResults'][_0xb6793(0x1f7)]+_0x1ca5c3['length']));}const _0x11dd1e=await updateBulkCounters(this[_0xb6793(0x22d)][_0xb6793(0x22e)],this[_0xb6793(0x22d)][_0xb6793(0x22f)],this[_0xb6793(0x22d)][_0xb6793(0x1cc)],_0x43c108,_0x25e725,_0x560e24,_0x22ab1d);return _0x11dd1e;}async[a3_0x382493(0x21a)](_0x108c44){const _0x3cece5=a3_0x382493;for(const _0x35a1b3 of _0x108c44){const {jobInfo:_0x38058c,results:_0x306c05,initialCount:_0x163dcc,missingFromResultSfids:_0x2fa132,timedOut:_0x788776,startTs:_0x3f682b,endTs:_0x12b8f7}=_0x35a1b3,_0x3b8223=_0x3f682b&&_0x12b8f7?_0x12b8f7[_0x3cece5(0x1c1)]()-_0x3f682b[_0x3cece5(0x1c1)]():null,_0x57555b=await insertBulkJob({'jobId':_0x38058c['id'],'executionId':this[_0x3cece5(0x22d)][_0x3cece5(0x22e)],'sobject':this[_0x3cece5(0x22d)][_0x3cece5(0x228)],'operation':_0x38058c[_0x3cece5(0x1cd)],'concurrencyMode':_0x38058c['concurrencyMode'],'jobInfo':_0x38058c,'finalState':_0x38058c[_0x3cece5(0x1f3)],'initialCount':_0x163dcc,'totalCount':_0x306c05[_0x3cece5(0x20f)]['length']+_0x306c05[_0x3cece5(0x235)][_0x3cece5(0x1f7)]+_0x306c05['unprocessedRecords'][_0x3cece5(0x1f7)]+_0x2fa132['length'],'successfulCount':_0x306c05[_0x3cece5(0x20f)]['length'],'failedCount':_0x306c05[_0x3cece5(0x235)]['length']+_0x2fa132[_0x3cece5(0x1f7)],'unprocessedCount':_0x306c05[_0x3cece5(0x1c3)][_0x3cece5(0x1f7)],'timedOut':!!_0x788776,'isRetry':this['data'][_0x3cece5(0x1be)],'startTs':_0x3f682b,'endTs':_0x12b8f7,'durationMs':_0x3b8223});if(_0x306c05[_0x3cece5(0x235)][_0x3cece5(0x1f7)]||_0x2fa132[_0x3cece5(0x1f7)]){const _0x5685ea={},_0x5ae560=[];_0x306c05['failedResults']['forEach'](_0x66882a=>{const _0x25dd92=_0x3cece5,_0x20d839=_0x66882a[_0x25dd92(0x218)];let _0x1ecf99=_0x66882a[_0x25dd92(0x218)];_0x1ecf99==''||!_0x1ecf99?_0x1ecf99='unknown':_0x1ecf99=_0x66882a['sf__Error'][_0x25dd92(0x201)](/:.*/,''),!(_0x1ecf99 in _0x5685ea)&&(_0x5685ea[_0x1ecf99]=0x0),_0x5685ea[_0x1ecf99]++,!_0x5ae560[_0x25dd92(0x200)](_0x1293c5=>_0x1293c5[_0x25dd92(0x206)]==_0x20d839)&&_0x5ae560[_0x25dd92(0x1d1)]({'errorCode':_0x1ecf99,'fullError':_0x20d839});});_0x2fa132[_0x3cece5(0x1f7)]&&(_0x5685ea[_0x3cece5(0x1fd)]=_0x2fa132[_0x3cece5(0x1f7)],_0x5ae560[_0x3cece5(0x1d1)]({'errorCode':'MISSING_FROM_RESULTS','fullError':'MISSING_FROM_RESULTS:\x20One\x20or\x20more\x20records\x20were\x20missing\x20from\x20the\x20result\x20list\x20returned\x20by\x20the\x20bulk\x20API.\x20This\x20typically\x20happens\x20on\x20some\x20aborted\x20jobs\x20after\x20max\x20timeout\x20is\x20reached.'}));for(const {errorCode:_0x1751c9,fullError:_0x33cd03}of _0x5ae560){const _0x54d479=await insertUniqBulkJobErrorsPerObj({'executionId':this['data']['executionId'],'sobject':this[_0x3cece5(0x22d)][_0x3cece5(0x228)],'errorCode':_0x1751c9,'fullError':_0x33cd03});if(_0x54d479[_0x3cece5(0x1f9)]['length']){let _0x1cb402='Bulk\x20data\x20load\x20for\x20object:\x20'+this[_0x3cece5(0x22d)][_0x3cece5(0x228)]+_0x3cece5(0x1ce)+_0x1751c9+_0x3cece5(0x237)+_0x33cd03;console[_0x3cece5(0x1f4)](this['logPrefix']+_0x1cb402);_0x1751c9=='MISSING_FROM_RESULTS'?_0x1cb402+='\x20These\x20records\x20will\x20be\x20processed\x20on\x20the\x20next\x20policy\x20execution.':_0x1cb402+=_0x3cece5(0x210);const _0x327742=await this[_0x3cece5(0x1fb)]['insertRunLog'](this[_0x3cece5(0x22d)][_0x3cece5(0x22e)],this[_0x3cece5(0x22d)][_0x3cece5(0x232)],'Error',_0x3cece5(0x1c5),_0x1cb402);}}for(const [_0x58f91b,_0x376048]of Object[_0x3cece5(0x23c)](_0x5685ea)){const _0x2b6ec3=await insertBulkJobErrors({'jobId':_0x38058c['id'],'errorCode':_0x58f91b,'errorCount':_0x376048});}}}}async[a3_0x382493(0x1da)](_0x397aff){const _0x33146c=a3_0x382493;let _0x291cf8=![];const _0xda9258=[];for(const _0x5a31a6 of _0x397aff){const {jobInfo:_0x3ad027,results:_0x5b8a5c,missingFromResultSfids:_0x37a173,timedOut:_0x15dde2}=_0x5a31a6;if(_0x5b8a5c){let _0x59cc68=![];const _0x2ea7bd=_0x5b8a5c[_0x33146c(0x20f)]['map'](_0x1e7861=>{const _0x34d05b=_0x33146c;!_0x1e7861[_0x34d05b(0x216)]&&!_0x1e7861['id']&&!_0x59cc68&&(console[_0x34d05b(0x1eb)](this['logPrefix']+'One\x20or\x20more\x20batch\x20successful\x20result\x20rows\x20did\x20not\x20have\x20a\x20sf__Id\x20or\x20id\x20field!\x20This\x20should\x20never\x20happen.'),console[_0x34d05b(0x1d8)](_0x34d05b(0x239),JSON['stringify'](_0x1e7861)),_0x59cc68=!![]);const _0x25763d=_0x1e7861[_0x34d05b(0x216)]?_0x1e7861[_0x34d05b(0x216)]:_0x1e7861['id']?_0x1e7861['id']:null,_0x64177e='s';return[_0x25763d,_0x64177e];});_0x59cc68=![];const _0x5b3512=_0x5b8a5c[_0x33146c(0x235)][_0x33146c(0x21f)](_0x3b6b78=>{const _0x431919=_0x33146c;!_0x3b6b78[_0x431919(0x216)]&&!_0x3b6b78['id']&&!_0x59cc68&&(console['error'](this[_0x431919(0x1f5)]+'One\x20or\x20more\x20batch\x20result\x20failed\x20rows\x20did\x20not\x20have\x20an\x20sf__Id\x20or\x20id\x20field!\x20This\x20should\x20never\x20happen.'),console[_0x431919(0x1d8)]('failedRow:',JSON[_0x431919(0x21b)](_0x3b6b78)),_0x59cc68=!![]);const _0x4549be=_0x3b6b78[_0x431919(0x216)]?_0x3b6b78[_0x431919(0x216)]:_0x3b6b78['id']?_0x3b6b78['id']:null;let _0x3a8276=_0x3b6b78[_0x431919(0x218)];!_0x3a8276?_0x3a8276=_0x431919(0x22a):(_0x3a8276=_0x3b6b78[_0x431919(0x218)]['replace'](/:.*/,''),_0x3a8276==''&&(_0x3a8276=_0x431919(0x22a)));let _0x30fbdc;if(this['data']['isRetry'])_0x30fbdc='f';else{if([_0x431919(0x23e)][_0x431919(0x215)](_0x3a8276))_0x30fbdc='l',_0x291cf8=!![];else['ENTITY_IS_DELETED']['includes'](_0x3a8276)?_0x30fbdc='x':_0x30fbdc='e';}return[_0x4549be,_0x30fbdc];}),_0x32420c=_0x37a173['map'](_0x3ecfd8=>{return[_0x3ecfd8,'m'];});if(!this[_0x33146c(0x22d)]['isRetry']&&process[_0x33146c(0x1de)]['FORCE_BULK_LOCKS']&&this['job']['id']%0x2==0x0){const _0x396db9=_0x2ea7bd[_0x33146c(0x1f7)]<0xf?_0x2ea7bd[_0x33146c(0x1f7)]:0xf;for(let _0x344338=0x1;_0x344338<=_0x396db9;_0x344338++){const _0x15c4ca=_0x2ea7bd[_0x33146c(0x221)]();_0x15c4ca[0x1]='l',_0x5b3512['push'](_0x15c4ca);}_0x291cf8=!![];}_0xda9258[_0x33146c(0x1d1)](..._0x2ea7bd,..._0x5b3512,..._0x32420c);}}if(_0xda9258[_0x33146c(0x1f7)])try{console[_0x33146c(0x1d8)](this[_0x33146c(0x1f5)]+'Submitting\x20cache-submitted-updater\x20job\x20for\x20'+this[_0x33146c(0x22d)]['objectName']+'\x20with\x20'+_0xda9258[_0x33146c(0x1f7)]+_0x33146c(0x234));const _0x31c97d=await handleJobSubmission({'queue':this['upStateQueue'],'jobType':_0x33146c(0x20d),'jobData':{'executionId':this['data'][_0x33146c(0x22e)],'policyName':this[_0x33146c(0x22d)]['policyName'],'objectName':this['data'][_0x33146c(0x228)],'subIdStateArr':_0xda9258},'enableRetries':!![],'noJobName':!![]});return[_0x31c97d,_0x291cf8];}catch(_0x4dcee6){throw new JobSubmissionError(_0x33146c(0x1f2)+_0x4dcee6[_0x33146c(0x1ef)]);}else return[null,_0x291cf8];}async[a3_0x382493(0x207)](_0x2de30e){const _0x39afdc=a3_0x382493,_0x1ab36d=[];for(const _0x1c90d8 of _0x2de30e){const {jobInfo:_0x5deb78,results:_0x25c907}=_0x1c90d8;_0x25c907&&_0x25c907[_0x39afdc(0x1c3)][_0x39afdc(0x1f7)]&&_0x1ab36d['push'](..._0x25c907[_0x39afdc(0x1c3)]);}if(_0x1ab36d[_0x39afdc(0x1f7)]){const _0x1b273d=await createTmpBulkBatchTable(),_0x11a187=await loadTmpBulkBatchTable(_0x1b273d,_0x1ab36d),_0x4ddb6e=await this[_0x39afdc(0x1ba)](_0x1b273d,_0x1ab36d['length']);return _0x4ddb6e;}else return null;}async[a3_0x382493(0x1ba)](_0x4d8313,_0x29b1ad){const _0x195eef=a3_0x382493;console[_0x195eef(0x1d8)](this[_0x195eef(0x1f5)]+'Re-submitting\x20unprocessed\x20records\x20to\x20bulk-updater\x20job\x20for\x20objectName:\x20'+this['data'][_0x195eef(0x228)]+_0x195eef(0x202)+_0x29b1ad+'\x20records...');const _0x21afb3=await handleJobSubmission({'queue':this[_0x195eef(0x1d2)],'jobType':_0x195eef(0x1e7),'jobData':{...this[_0x195eef(0x22d)],'bulkBatchTableName':_0x4d8313,'batchRecordCount':_0x29b1ad,'isUnproccRetry':!![]},'enableRetries':![],'noJobName':!![]});return _0x21afb3;}}function a3_0x1780(){const _0x2fc258=['prettyBatchRecordStats','error','(UNPR_RETRY)\x20','\x0a------------------','batchRecordCount','message','\x20exceeded\x20limit\x20of\x205000.','271030pcqJBL','ERROR:\x20Could\x20not\x20submit\x20cache-submitted-updater\x20job\x20to\x20modify\x20queue.\x20','state','warn','logPrefix','job','length','\x20exceeded\x20limit\x20of\x2031900.','rows','./worker-utils/bulk-batch-tmp-table','salesforce','\x20exceeded\x20limit\x20of\x20399000.','MISSING_FROM_RESULTS','toLowerCase','bulkOperation','some','replace','\x20with\x20','../../utils/required-param','Bulk\x20job\x20creation\x20with\x20operation\x20hardDelete\x20failed\x20and\x20was\x20defaulted\x20to\x20standard\x20delete.','values','fullError','resubmitUnprocessedRecords','167893ByGGaK','1yCISsq','./worker-utils/lock-utils','splitIntoBatches','bulkDelete','cache-submitted-updater','maxFieldCharCount:\x20','successfulResults','\x20More\x20info\x20on\x20these\x20error\x20codes\x20can\x20be\x20found\x20here:\x20https://developer.salesforce.com/docs/atlas.en-us.228.0.api.meta/api/sforce_api_calls_concepts_core_data_objects.htm','delete','upStateQueue','validateJobData','+++++\x20batchInfoList\x20(sliced\x202000)\x20on\x20object=','includes','sf__Id','max','sf__Error','.\x20Further\x20instances\x20of\x20this\x20error\x20will\x20not\x20be\x20logged\x20on\x20this\x20run.\x20Full\x20error:\x20Initial\x20attempt\x20to\x20create\x20a\x20bulk\x20job\x20with\x20operation\x20hardDelete\x20has\x20failed\x20and\x20has\x20been\x20defaulted\x20to\x20standard\x20delete.\x20This\x20likely\x20means\x20the\x20Hard\x20Delete\x20administrative\x20permission\x20is\x20not\x20enabled\x20for\x20the\x20PC\x20SF\x20user.\x20We\x20recommend\x20creating\x20a\x20new\x20permission\x20set\x20to\x20solve\x20this.\x20More\x20info\x20can\x20be\x20found\x20here:\x20https://help.salesforce.com/articleView?id=000328731&type=1&mode=1','insertJobDetailsToDb','stringify','getFullRecordStats','object-sizeof','insertSpecialUniqErrors','map','runFullBulkJobFlow','shift','recordCount','Error\x20submitting\x20batch\x20operation\x20to\x20Salesforce!','upsert','./worker-utils/bulk-counters','10832KVjPer','594jOkMWF','objectName','140Lequff','unknown','every','12udjVvq','data','executionId','recordRetention','slice','update','policyName','allRecordsWithinRecordLimits','\x20records.','failedResults','2359098ggQFPv','.\x20Further\x20instances\x20of\x20this\x20error\x20will\x20not\x20be\x20logged\x20on\x20this\x20run.\x20Full\x20error:\x20','policyWrapper','successRow:','bulkBatchTableName','../../errors','entries','\x20exceeded\x20limit\x20of\x20100000000\x20(100\x20MB)','UNABLE_TO_LOCK_ROW','Records\x20batch\x20for\x20object=','submitBulkUpdater','run','COERCED_TO_STANDARD_DELETE','../worker/worker-utils/job-gateway','isRetry','isArray','bytes','getTime','\x20stats\x20pre-split:\x20','unprocessedRecords','submitBatchToSF','Bulk\x20Operation','updateBulkCounters','transform','Error','11586432RHsdxF','Bulk\x20data\x20load\x20for\x20object:\x20','SERIAL_BULK','objectId','operation','\x20encountered\x20a\x20new\x20error:\x20','submitBatchesToSF','Splitting\x20up\x20records\x20for\x20','push','bulkQueue','./worker-utils/bulk-jobs','batchStatsExceedLimits','singleRecordExceedsLimits','3ONEJii','isUnproccRetry','log','hardDelete','submitSubUpdaterJob','nextRecordFitsInBatch','charCount:\x20','713994icFerE','env','modifyQueue','getRecordOrBatchStats','fieldCount:\x20','recordCount:','Total\x20batch\x20bytes:\x20','keys','addBatchStats','exports','bulk-updater','charCount','1534628MFdLHM'];a3_0x1780=function(){return _0x2fc258;};return a3_0x1780();}module[a3_0x382493(0x1e6)]=BulkUpdater;