function a3_0x3d31(){const _0x29a77d=['Bulk\x20data\x20load\x20for\x20object:\x20','run','bulkOperation','failedResults','bulkQueue','modifyQueue','\x20records...','../../settings','policyName','../worker/worker-utils/job-gateway','\x20stats\x20pre-split:\x20','\x20\x20charCount:','validateJobData','insertSpecialUniqErrors','slice','update','.\x20Further\x20instances\x20of\x20this\x20error\x20will\x20not\x20be\x20logged\x20on\x20this\x20run.\x20Full\x20error:\x20','log','(RETRY)\x20','logPrefix','getRecordOrBatchStats','batchStatsExceedLimits','rows','+++++\x20batchInfoList\x20(sliced\x202000)\x20on\x20object=','some','shift','charCount:\x20','ENTITY_IS_DELETED','Bulk\x20Operation','7339372rGAhEf','./worker-utils/bulk-counters','../../errors','\x0a------------------','sf__Id','SERIAL_BULK','sf__Error','\x20\x20megabytes:','\x20More\x20info\x20on\x20these\x20error\x20codes\x20can\x20be\x20found\x20here:\x20https://developer.salesforce.com/docs/atlas.en-us.228.0.api.meta/api/sforce_api_calls_concepts_core_data_objects.htm','unprocessedRecords','MISSING_FROM_RESULTS:\x20One\x20or\x20more\x20records\x20were\x20missing\x20from\x20the\x20result\x20list\x20returned\x20by\x20the\x20bulk\x20API.\x20This\x20typically\x20happens\x20on\x20some\x20aborted\x20jobs\x20after\x20max\x20timeout\x20is\x20reached.','Total\x20batch\x20bytes:\x20','UNABLE_TO_LOCK_ROW','\x20+++++\x0a','FORCE_BULK_LOCKS','bulk-updater','salesforce','No\x20batchInfo\x20returned\x20from\x20submitBatchToSF()!','902872SlKDph','state','Submitting\x20cache-submitted-updater\x20job\x20for\x20','recordCount','.\x20Further\x20instances\x20of\x20this\x20error\x20will\x20not\x20be\x20logged\x20on\x20this\x20run.\x20Full\x20error:\x20Initial\x20attempt\x20to\x20create\x20a\x20bulk\x20job\x20with\x20operation\x20hardDelete\x20has\x20failed\x20and\x20has\x20been\x20defaulted\x20to\x20standard\x20delete.\x20This\x20likely\x20means\x20the\x20Hard\x20Delete\x20administrative\x20permission\x20is\x20not\x20enabled\x20for\x20the\x20PC\x20SF\x20user.\x20We\x20recommend\x20creating\x20a\x20new\x20permission\x20set\x20to\x20solve\x20this.\x20More\x20info\x20can\x20be\x20found\x20here:\x20https://help.salesforce.com/articleView?id=000328731&type=1&mode=1','submitBulkUpdater','keys','One\x20or\x20more\x20batch\x20result\x20failed\x20rows\x20did\x20not\x20have\x20an\x20sf__Id\x20or\x20id\x20field!\x20This\x20should\x20never\x20happen.','Bulk\x20job\x20creation\x20with\x20operation\x20hardDelete\x20failed\x20and\x20was\x20defaulted\x20to\x20standard\x20delete.','prettyBatchRecordStats','./worker-utils/bulk-jobs','../../models/salesforce/bulk2-job','474PPHlAi','replace','env','\x20exceeded\x20limit\x20of\x20399000.','batchRecordCount','updateBulkCounters','./worker-utils/lock-utils','Records\x20batch\x20for\x20object=','toFixed','successfulResults','executionId','length','map','stringify','Re-submitting\x20unprocessed\x20records\x20to\x20bulk-updater\x20job\x20for\x20objectName:\x20','2029247pKQUSD','bulkUpdate','operation','fullError','job','8954148jIEhkx','isUnproccRetry','recordCount:','Error','transform','MISSING_FROM_RESULTS','addBatchStats','concurrencyMode','98965rlDtpI','push','includes','singleRecordExceedsLimits','unknown','nextRecordFitsInBatch','upStateQueue','bulkDelete','30ACMwnR','One\x20or\x20more\x20batch\x20successful\x20result\x20rows\x20did\x20not\x20have\x20a\x20sf__Id\x20or\x20id\x20field!\x20This\x20should\x20never\x20happen.','getTime','runFullBulkJobFlow','warn','6kTUKgt','forEach','getFullRecordStats','exports','bulkBatchTableName','data','submitBatchToSF','416464zPcLct','message','\x20exceeded\x20limit\x20of\x20100000000\x20(100\x20MB)','error','submitBatchesToSF','\x20records.','every','object-sizeof','Error\x20submitting\x20batch\x20operation\x20to\x20Salesforce!','\x20exceeded\x20limit\x20of\x2031900.','insertRunLog','isRetry','bytes','objectName','splitIntoBatches','hardDelete','1449603IDYXrj','successRow:','resubmitUnprocessedRecords','recordRetention','toLowerCase','submitSubUpdaterJob','insertJobDetailsToDb','charCount','56HMIinD','maxFieldCharCount:\x20','\x20with\x20','values','delete'];a3_0x3d31=function(){return _0x29a77d;};return a3_0x3d31();}function a3_0x4fa7(_0x3ca99c,_0x2a99c3){const _0x3d31db=a3_0x3d31();return a3_0x4fa7=function(_0x4fa77e,_0x2493be){_0x4fa77e=_0x4fa77e-0x16b;let _0x3a47f3=_0x3d31db[_0x4fa77e];return _0x3a47f3;},a3_0x4fa7(_0x3ca99c,_0x2a99c3);}const a3_0x2f80e2=a3_0x4fa7;(function(_0x23d3f8,_0x26d0b4){const _0x19ca3d=a3_0x4fa7,_0x513132=_0x23d3f8();while(!![]){try{const _0x1ba0c8=parseInt(_0x19ca3d(0x17d))/0x1+-parseInt(_0x19ca3d(0x1b9))/0x2*(parseInt(_0x19ca3d(0x1b2))/0x3)+-parseInt(_0x19ca3d(0x16b))/0x4+-parseInt(_0x19ca3d(0x1a5))/0x5*(-parseInt(_0x19ca3d(0x189))/0x6)+parseInt(_0x19ca3d(0x19d))/0x7+parseInt(_0x19ca3d(0x1d1))/0x8*(-parseInt(_0x19ca3d(0x1c9))/0x9)+-parseInt(_0x19ca3d(0x1ad))/0xa*(-parseInt(_0x19ca3d(0x198))/0xb);if(_0x1ba0c8===_0x26d0b4)break;else _0x513132['push'](_0x513132['shift']());}catch(_0x5b9e98){_0x513132['push'](_0x513132['shift']());}}}(a3_0x3d31,0xe0b12));const sizeof=require(a3_0x2f80e2(0x1c0)),requiredParam=require('../../utils/required-param'),{skipSFDeletes}=require(a3_0x2f80e2(0x1dd)),{updateBulkCounters}=require(a3_0x2f80e2(0x16c)),{handleJobSubmission}=require(a3_0x2f80e2(0x1df)),{JobSubmissionError,BulkSingleRecordLimitsExceededError}=require(a3_0x2f80e2(0x16d)),Bulk2Job=require(a3_0x2f80e2(0x188)),{insertBulkJob,insertBulkJobErrors,insertUniqBulkJobErrorsPerObj}=require(a3_0x2f80e2(0x187)),{acquireLock,releaseLock,LOCK_TYPES}=require(a3_0x2f80e2(0x18f)),{retrieveBulkBatchRecords,dropTmpBulkBatchTable,createTmpBulkBatchTable,loadTmpBulkBatchTable}=require('./worker-utils/bulk-batch-tmp-table');class BulkUpdater{constructor({job:job=requiredParam(a3_0x2f80e2(0x19c)),salesforce:salesforce=requiredParam(a3_0x2f80e2(0x17b)),db:db=requiredParam('db'),modifyQueue:modifyQueue=requiredParam(a3_0x2f80e2(0x1db)),bulkQueue:bulkQueue=requiredParam(a3_0x2f80e2(0x1da)),upStateQueue:upStateQueue=requiredParam(a3_0x2f80e2(0x1ab))}){const _0x1b71e5=a3_0x2f80e2;this[_0x1b71e5(0x1e2)](job[_0x1b71e5(0x1b7)]),this['job']=job,this[_0x1b71e5(0x17b)]=salesforce,this['db']=db,this[_0x1b71e5(0x1db)]=modifyQueue,this[_0x1b71e5(0x1ab)]=upStateQueue,this[_0x1b71e5(0x1b7)]=this['job'][_0x1b71e5(0x1b7)],this[_0x1b71e5(0x18d)]=this[_0x1b71e5(0x19c)][_0x1b71e5(0x1b7)]['batchRecordCount'],this[_0x1b71e5(0x1cc)]=this[_0x1b71e5(0x1b7)][_0x1b71e5(0x1cc)][_0x1b71e5(0x1cd)]();if(this[_0x1b71e5(0x1b7)][_0x1b71e5(0x1c4)])this[_0x1b71e5(0x1e9)]=_0x1b71e5(0x1e8);else this[_0x1b71e5(0x1b7)][_0x1b71e5(0x19e)]?this[_0x1b71e5(0x1e9)]='(UNPR_RETRY)\x20':this[_0x1b71e5(0x1e9)]='';}[a3_0x2f80e2(0x1e2)]({policyWrapper:policyWrapper=requiredParam('policyWrapper'),executionId:executionId=requiredParam('executionId'),policyName:policyName=requiredParam(a3_0x2f80e2(0x1de)),objectName:objectName=requiredParam(a3_0x2f80e2(0x1c6)),objectHash:objectHash=requiredParam('objectHash'),objectId:objectId=requiredParam('objectId'),recordRetention:recordRetention=requiredParam(a3_0x2f80e2(0x1cc)),hardDelete:_0x1eb16e,bulkBatchTableName:bulkBatchTableName=requiredParam(a3_0x2f80e2(0x1b6)),batchRecordCount:batchRecordCount=requiredParam(a3_0x2f80e2(0x18d)),isRetry:_0x163fdc,isUnproccRetry:_0x1a1ea8}){}async[a3_0x2f80e2(0x1d7)](){const _0x1319d1=a3_0x2f80e2;try{const _0x33ce0c=await retrieveBulkBatchRecords(this[_0x1319d1(0x1b7)]['bulkBatchTableName']),_0x2e0fce=this['splitIntoBatches'](_0x33ce0c),_0x118de7=await this[_0x1319d1(0x1bd)](_0x2e0fce);console[_0x1319d1(0x1e7)](this[_0x1319d1(0x1e9)]+_0x1319d1(0x1ed)+this[_0x1319d1(0x1b7)]['objectName']+_0x1319d1(0x178)+JSON[_0x1319d1(0x196)](_0x118de7,undefined,0x2)[_0x1319d1(0x1e4)](0x0,0x7d0)+_0x1319d1(0x16e)),await this[_0x1319d1(0x1e3)](_0x118de7);const _0x455235=await this['updateBulkCounters'](_0x118de7),_0x5d3a42=await this[_0x1319d1(0x1cf)](_0x118de7),[_0x4794e7,_0x514cc7]=await this[_0x1319d1(0x1ce)](_0x118de7),_0x102709=await this[_0x1319d1(0x1cb)](_0x118de7),_0x215f6d=await dropTmpBulkBatchTable(this[_0x1319d1(0x1b7)][_0x1319d1(0x1b6)]);return{'success':!![],'enableEndPhaseRetries':_0x514cc7};}catch(_0x3716a0){return console[_0x1319d1(0x1bc)](this['logPrefix']+_0x1319d1(0x1c1),_0x3716a0),{'success':![],'error':_0x3716a0};}}[a3_0x2f80e2(0x1eb)]({bytes:_0x533afd,charCount:_0x44dbff,recordCount:_0x111dea}){const _0x5e1558=a3_0x2f80e2;if(_0x533afd>0x5f5e100)return console['warn'](this['logPrefix']+_0x5e1558(0x176)+_0x533afd+_0x5e1558(0x1bb)),!![];return![];}['getRecordOrBatchStats'](_0x588dd0){const _0x35540a=a3_0x2f80e2;return{'bytes':sizeof(_0x588dd0),'charCount':JSON[_0x35540a(0x196)](_0x588dd0)[_0x35540a(0x194)],'recordCount':Array['isArray'](_0x588dd0)?_0x588dd0['length']:0x1};}[a3_0x2f80e2(0x1b4)](_0x543793){const _0x16720b=a3_0x2f80e2;return{...this[_0x16720b(0x1ea)](_0x543793),'fieldCount':Object[_0x16720b(0x183)](_0x543793)[_0x16720b(0x194)],'maxFieldCharCount':Math['max'](Object[_0x16720b(0x1d4)](_0x543793)[_0x16720b(0x195)](_0xb88f6a=>JSON['stringify'](_0xb88f6a)[_0x16720b(0x194)]))};}[a3_0x2f80e2(0x186)](_0x43d36e){const _0x156e94=a3_0x2f80e2;return _0x156e94(0x19f)+_0x43d36e[_0x156e94(0x180)]+_0x156e94(0x172)+(_0x43d36e[_0x156e94(0x1c5)]/0x400/0x400)[_0x156e94(0x191)](0x2)+_0x156e94(0x1e1)+_0x43d36e[_0x156e94(0x1d0)];}['nextRecordFitsInBatch'](_0x48d46d,_0x32bd92){const _0x3434f1=a3_0x2f80e2;return!this[_0x3434f1(0x1eb)](this[_0x3434f1(0x1a3)](_0x48d46d,_0x32bd92));}[a3_0x2f80e2(0x1a3)](_0xd66d48,_0x1fc8a8){const _0x4f6ce0=a3_0x2f80e2;return{'bytes':_0xd66d48['bytes']+_0x1fc8a8['bytes'],'charCount':_0xd66d48['charCount']+_0x1fc8a8[_0x4f6ce0(0x1d0)],'recordCount':_0xd66d48['recordCount']+_0x1fc8a8['recordCount']};}[a3_0x2f80e2(0x1a8)]({charCount:_0x3103a5,fieldCount:_0x2aedd1,maxFieldCharCount:_0x51d3ba}){const _0x192801=a3_0x2f80e2;if(_0x2aedd1>0x1388)return console['warn'](this[_0x192801(0x1e9)]+'fieldCount:\x20'+_0x2aedd1+'\x20exceeded\x20limit\x20of\x205000.'),!![];if(_0x3103a5>0x61698)return console[_0x192801(0x1b1)](this[_0x192801(0x1e9)]+_0x192801(0x1f0)+_0x3103a5+_0x192801(0x18c)),!![];if(_0x51d3ba>0x7c9c)return console[_0x192801(0x1b1)](this[_0x192801(0x1e9)]+_0x192801(0x1d2)+_0x51d3ba+_0x192801(0x1c2)),!![];return![];}['allRecordsWithinRecordLimits'](_0x4a20d2){const _0x230600=a3_0x2f80e2;return _0x4a20d2[_0x230600(0x1bf)](_0x41b223=>!this[_0x230600(0x1a8)](this['getFullRecordStats'](_0x41b223)));}[a3_0x2f80e2(0x1c7)](_0x4104b9){const _0x38cce4=a3_0x2f80e2,_0x56e50b=this[_0x38cce4(0x1ea)](_0x4104b9);console['log'](this[_0x38cce4(0x1e9)]+_0x38cce4(0x190)+this[_0x38cce4(0x1b7)][_0x38cce4(0x1c6)]+_0x38cce4(0x1e0)+this[_0x38cce4(0x186)](_0x56e50b));if(!this['allRecordsWithinRecordLimits'](_0x4104b9))throw new BulkSingleRecordLimitsExceededError(_0x56e50b);if(!this['batchStatsExceedLimits'](_0x56e50b))return[_0x4104b9];else console[_0x38cce4(0x1e7)](this[_0x38cce4(0x1e9)]+'Splitting\x20up\x20records\x20for\x20'+this[_0x38cce4(0x1b7)][_0x38cce4(0x1c6)]);const _0x5b6b4e=[],_0x24f3a1=()=>{return{'bytes':0x0,'charCount':0x0,'recordCount':0x0};};let _0x331a3c=[],_0x5cc515=_0x24f3a1();while(_0x4104b9[_0x38cce4(0x194)]){const _0x21006f=_0x4104b9[_0x38cce4(0x1ef)](),_0x17cc17=this[_0x38cce4(0x1ea)](_0x21006f);if(!this[_0x38cce4(0x1aa)](_0x5cc515,_0x17cc17)){if(!_0x331a3c[_0x38cce4(0x194)])throw new BulkSingleRecordLimitsExceededError(_0x17cc17);_0x5b6b4e[_0x38cce4(0x1a6)](_0x331a3c),_0x331a3c=[],_0x5cc515=_0x24f3a1();}_0x331a3c['push'](_0x21006f),_0x5cc515=this['addBatchStats'](_0x5cc515,_0x17cc17);}return _0x331a3c[_0x38cce4(0x194)]&&_0x5b6b4e['push'](_0x331a3c),_0x5b6b4e;}async[a3_0x2f80e2(0x1bd)](_0x1301e2){const _0x545699=a3_0x2f80e2,_0x3ad07d=[];for(const _0x5c59ea of _0x1301e2){const _0x31e506=await this[_0x545699(0x1b8)](_0x5c59ea);if(_0x31e506)_0x3ad07d['push'](_0x31e506);else console[_0x545699(0x1b1)](_0x545699(0x17c));}return _0x3ad07d;}async[a3_0x2f80e2(0x1b8)](_0x349515){const _0x501281=a3_0x2f80e2;if(!_0x349515||!_0x349515[_0x501281(0x194)])return;const _0x49170c=new Bulk2Job({'object':this['data'][_0x501281(0x1c6)],'operation':this['recordRetention']===_0x501281(0x1d5)?this[_0x501281(0x1b7)][_0x501281(0x1c8)]===!![]?'hardDelete':_0x501281(0x1d5):this['recordRetention']==='transform'?'upsert':null,'externalIdFieldName':this[_0x501281(0x1cc)]===_0x501281(0x1d5)?null:this[_0x501281(0x1cc)]===_0x501281(0x1a1)?'id':null});try{if(this[_0x501281(0x1b7)]['isRetry'])await acquireLock(this['db'],LOCK_TYPES[_0x501281(0x170)]);const _0x441851=await _0x49170c[_0x501281(0x1b0)](_0x349515);return _0x441851;}finally{if(this[_0x501281(0x1b7)][_0x501281(0x1c4)])await releaseLock(this['db'],LOCK_TYPES[_0x501281(0x170)]);}}async[a3_0x2f80e2(0x1ac)](_0x18a24f,_0x2721fd){const _0x4333ff=a3_0x2f80e2;return await this['salesforce'][_0x4333ff(0x1d8)](_0x18a24f,_0x2721fd,_0x4333ff(0x1d5));}async[a3_0x2f80e2(0x199)](_0x865520,_0x566094){const _0x1fd61c=a3_0x2f80e2;return await this[_0x1fd61c(0x17b)][_0x1fd61c(0x1d8)](_0x865520,_0x566094,_0x1fd61c(0x1e5));}async['insertSpecialUniqErrors'](_0x3f7a44){const _0xf72b31=a3_0x2f80e2;for(const _0x17920a of _0x3f7a44){const {jobInfo:_0x3ca4d4,results:_0x471862,coercedToStandardDelete:_0x320637}=_0x17920a;if(_0x320637){const _0x3f0f68='COERCED_TO_STANDARD_DELETE',_0x97194f=_0xf72b31(0x185),_0x1002f0=await insertUniqBulkJobErrorsPerObj({'executionId':this[_0xf72b31(0x1b7)][_0xf72b31(0x193)],'sobject':this[_0xf72b31(0x1b7)]['objectName'],'errorCode':_0x3f0f68,'fullError':_0x97194f});if(_0x1002f0[_0xf72b31(0x1ec)][_0xf72b31(0x194)]){let _0x331011=_0xf72b31(0x1d6)+this['data']['objectName']+'\x20encountered\x20a\x20new\x20error:\x20'+_0x3f0f68+_0xf72b31(0x181);console[_0xf72b31(0x1b1)](this['logPrefix']+_0x331011);const _0x4dc81e=await this[_0xf72b31(0x17b)]['insertRunLog'](this[_0xf72b31(0x1b7)][_0xf72b31(0x193)],this[_0xf72b31(0x1b7)]['policyName'],_0xf72b31(0x1a0),_0xf72b31(0x1f2),_0x331011);}return;}}}async[a3_0x2f80e2(0x18e)](_0x5ac217){const _0x9b6b4a=a3_0x2f80e2;let _0x2536cd=0x0,_0x210c31=0x0,_0x1a83e6=0x0,_0x8124fc=0x0;for(const _0x8ea1eb of _0x5ac217){const {jobInfo:_0x6d7fdc,results:_0x3a0b36,coercedToStandardDelete:_0x27e316,initialCount:_0x2c3879,missingFromResultSfids:_0x4e5289}=_0x8ea1eb;_0x3a0b36&&(_0x2536cd+=_0x2c3879,this[_0x9b6b4a(0x1b7)][_0x9b6b4a(0x1c4)]?(_0x210c31-=_0x3a0b36[_0x9b6b4a(0x192)][_0x9b6b4a(0x194)],_0x1a83e6+=_0x3a0b36[_0x9b6b4a(0x192)]['length']):(_0x210c31+=_0x3a0b36['failedResults'][_0x9b6b4a(0x194)]+_0x4e5289[_0x9b6b4a(0x194)],_0x1a83e6+=_0x3a0b36['successfulResults']['length'],_0x8124fc+=_0x3a0b36[_0x9b6b4a(0x1d9)][_0x9b6b4a(0x194)]+_0x3a0b36[_0x9b6b4a(0x192)][_0x9b6b4a(0x194)]+_0x4e5289['length']));}const _0x44ae0d=await updateBulkCounters(this[_0x9b6b4a(0x1b7)][_0x9b6b4a(0x193)],this['data']['recordRetention'],this['data']['objectId'],_0x2536cd,_0x1a83e6,_0x210c31,_0x8124fc);return _0x44ae0d;}async['insertJobDetailsToDb'](_0x433876){const _0x1307b3=a3_0x2f80e2;for(const _0x2e5355 of _0x433876){const {jobInfo:_0x2a85f6,results:_0x301304,initialCount:_0x3baf8e,missingFromResultSfids:_0x58f28d,timedOut:_0x1f720c,startTs:_0x4fa5f3,endTs:_0xfbdd35}=_0x2e5355,_0x401a88=_0x4fa5f3&&_0xfbdd35?_0xfbdd35[_0x1307b3(0x1af)]()-_0x4fa5f3[_0x1307b3(0x1af)]():null,_0x22c9ea=await insertBulkJob({'jobId':_0x2a85f6['id'],'executionId':this[_0x1307b3(0x1b7)][_0x1307b3(0x193)],'sobject':this[_0x1307b3(0x1b7)][_0x1307b3(0x1c6)],'operation':_0x2a85f6[_0x1307b3(0x19a)],'concurrencyMode':_0x2a85f6[_0x1307b3(0x1a4)],'jobInfo':_0x2a85f6,'finalState':_0x2a85f6[_0x1307b3(0x17e)],'initialCount':_0x3baf8e,'totalCount':_0x301304['successfulResults']['length']+_0x301304['failedResults'][_0x1307b3(0x194)]+_0x301304['unprocessedRecords']['length']+_0x58f28d[_0x1307b3(0x194)],'successfulCount':_0x301304['successfulResults'][_0x1307b3(0x194)],'failedCount':_0x301304[_0x1307b3(0x1d9)][_0x1307b3(0x194)]+_0x58f28d[_0x1307b3(0x194)],'unprocessedCount':_0x301304[_0x1307b3(0x174)][_0x1307b3(0x194)],'timedOut':!!_0x1f720c,'isRetry':this[_0x1307b3(0x1b7)]['isRetry'],'startTs':_0x4fa5f3,'endTs':_0xfbdd35,'durationMs':_0x401a88});if(_0x301304[_0x1307b3(0x1d9)]['length']||_0x58f28d['length']){const _0x153bdd={},_0x560cd9=[];_0x301304[_0x1307b3(0x1d9)][_0x1307b3(0x1b3)](_0x1a89b7=>{const _0x1313e4=_0x1307b3,_0xb26c5=_0x1a89b7[_0x1313e4(0x171)];let _0x2ac91d=_0x1a89b7['sf__Error'];_0x2ac91d==''||!_0x2ac91d?_0x2ac91d='unknown':_0x2ac91d=_0x1a89b7[_0x1313e4(0x171)]['replace'](/:.*/,''),!(_0x2ac91d in _0x153bdd)&&(_0x153bdd[_0x2ac91d]=0x0),_0x153bdd[_0x2ac91d]++,!_0x560cd9[_0x1313e4(0x1ee)](_0x2366e5=>_0x2366e5[_0x1313e4(0x19b)]==_0xb26c5)&&_0x560cd9['push']({'errorCode':_0x2ac91d,'fullError':_0xb26c5});});_0x58f28d[_0x1307b3(0x194)]&&(_0x153bdd['MISSING_FROM_RESULTS']=_0x58f28d[_0x1307b3(0x194)],_0x560cd9[_0x1307b3(0x1a6)]({'errorCode':'MISSING_FROM_RESULTS','fullError':_0x1307b3(0x175)}));for(const {errorCode:_0x53cbde,fullError:_0x29d708}of _0x560cd9){const _0x4e2e7b=await insertUniqBulkJobErrorsPerObj({'executionId':this['data'][_0x1307b3(0x193)],'sobject':this[_0x1307b3(0x1b7)][_0x1307b3(0x1c6)],'errorCode':_0x53cbde,'fullError':_0x29d708});if(_0x4e2e7b[_0x1307b3(0x1ec)]['length']){let _0x488ec6=_0x1307b3(0x1d6)+this[_0x1307b3(0x1b7)][_0x1307b3(0x1c6)]+'\x20encountered\x20a\x20new\x20error:\x20'+_0x53cbde+_0x1307b3(0x1e6)+_0x29d708;console[_0x1307b3(0x1b1)](this[_0x1307b3(0x1e9)]+_0x488ec6);_0x53cbde==_0x1307b3(0x1a2)?_0x488ec6+='\x20These\x20records\x20will\x20be\x20processed\x20on\x20the\x20next\x20policy\x20execution.':_0x488ec6+=_0x1307b3(0x173);const _0x5c5813=await this[_0x1307b3(0x17b)][_0x1307b3(0x1c3)](this[_0x1307b3(0x1b7)][_0x1307b3(0x193)],this[_0x1307b3(0x1b7)][_0x1307b3(0x1de)],'Error',_0x1307b3(0x1f2),_0x488ec6);}}for(const [_0xbb703b,_0x2bba8b]of Object['entries'](_0x153bdd)){const _0x69dc09=await insertBulkJobErrors({'jobId':_0x2a85f6['id'],'errorCode':_0xbb703b,'errorCount':_0x2bba8b});}}}}async['submitSubUpdaterJob'](_0x2dd39d){const _0x3d1db2=a3_0x2f80e2;let _0x2bfadf=![];const _0x85d912=[];for(const _0x39103f of _0x2dd39d){const {jobInfo:_0x3adb9c,results:_0x254d06,missingFromResultSfids:_0x486313,timedOut:_0x2d5eae}=_0x39103f;if(_0x254d06){let _0x275e10=![];const _0x286da5=_0x254d06[_0x3d1db2(0x192)][_0x3d1db2(0x195)](_0x49c5d1=>{const _0x44db3a=_0x3d1db2;!_0x49c5d1[_0x44db3a(0x16f)]&&!_0x49c5d1['id']&&!_0x275e10&&(console[_0x44db3a(0x1bc)](this[_0x44db3a(0x1e9)]+_0x44db3a(0x1ae)),console[_0x44db3a(0x1e7)](_0x44db3a(0x1ca),JSON[_0x44db3a(0x196)](_0x49c5d1)),_0x275e10=!![]);const _0x546635=_0x49c5d1[_0x44db3a(0x16f)]?_0x49c5d1[_0x44db3a(0x16f)]:_0x49c5d1['id']?_0x49c5d1['id']:null,_0x436934='s';return[_0x546635,_0x436934];});_0x275e10=![];const _0x5b5fc8=_0x254d06[_0x3d1db2(0x1d9)][_0x3d1db2(0x195)](_0x5d6fca=>{const _0x4ec2ca=_0x3d1db2;!_0x5d6fca[_0x4ec2ca(0x16f)]&&!_0x5d6fca['id']&&!_0x275e10&&(console[_0x4ec2ca(0x1bc)](this['logPrefix']+_0x4ec2ca(0x184)),console[_0x4ec2ca(0x1e7)]('failedRow:',JSON[_0x4ec2ca(0x196)](_0x5d6fca)),_0x275e10=!![]);const _0x5b0396=_0x5d6fca['sf__Id']?_0x5d6fca[_0x4ec2ca(0x16f)]:_0x5d6fca['id']?_0x5d6fca['id']:null;let _0x16ebfc=_0x5d6fca[_0x4ec2ca(0x171)];!_0x16ebfc?_0x16ebfc=_0x4ec2ca(0x1a9):(_0x16ebfc=_0x5d6fca[_0x4ec2ca(0x171)][_0x4ec2ca(0x18a)](/:.*/,''),_0x16ebfc==''&&(_0x16ebfc=_0x4ec2ca(0x1a9)));let _0x25bb22;if(this['data']['isRetry'])_0x25bb22='f';else{if([_0x4ec2ca(0x177)][_0x4ec2ca(0x1a7)](_0x16ebfc))_0x25bb22='l',_0x2bfadf=!![];else[_0x4ec2ca(0x1f1)][_0x4ec2ca(0x1a7)](_0x16ebfc)?_0x25bb22='x':_0x25bb22='e';}return[_0x5b0396,_0x25bb22];}),_0x5ed953=_0x486313[_0x3d1db2(0x195)](_0x5b98eb=>{return[_0x5b98eb,'m'];});if(!this[_0x3d1db2(0x1b7)][_0x3d1db2(0x1c4)]&&process[_0x3d1db2(0x18b)][_0x3d1db2(0x179)]&&this[_0x3d1db2(0x19c)]['id']%0x2==0x0){const _0x243942=_0x286da5[_0x3d1db2(0x194)]<0xf?_0x286da5[_0x3d1db2(0x194)]:0xf;for(let _0x2223f2=0x1;_0x2223f2<=_0x243942;_0x2223f2++){const _0x10bd19=_0x286da5[_0x3d1db2(0x1ef)]();_0x10bd19[0x1]='l',_0x5b5fc8[_0x3d1db2(0x1a6)](_0x10bd19);}_0x2bfadf=!![];}_0x85d912[_0x3d1db2(0x1a6)](..._0x286da5,..._0x5b5fc8,..._0x5ed953);}}if(_0x85d912[_0x3d1db2(0x194)])try{console[_0x3d1db2(0x1e7)](this['logPrefix']+_0x3d1db2(0x17f)+this['data'][_0x3d1db2(0x1c6)]+_0x3d1db2(0x1d3)+_0x85d912[_0x3d1db2(0x194)]+_0x3d1db2(0x1be));const _0x42d45a=await handleJobSubmission({'queue':this[_0x3d1db2(0x1ab)],'jobType':'cache-submitted-updater','jobData':{'executionId':this['data'][_0x3d1db2(0x193)],'policyName':this[_0x3d1db2(0x1b7)]['policyName'],'objectName':this[_0x3d1db2(0x1b7)][_0x3d1db2(0x1c6)],'subIdStateArr':_0x85d912},'enableRetries':!![],'noJobName':!![]});return[_0x42d45a,_0x2bfadf];}catch(_0x3a03dd){throw new JobSubmissionError('ERROR:\x20Could\x20not\x20submit\x20cache-submitted-updater\x20job\x20to\x20modify\x20queue.\x20'+_0x3a03dd[_0x3d1db2(0x1ba)]);}else return[null,_0x2bfadf];}async['resubmitUnprocessedRecords'](_0x4f12eb){const _0x19bc9f=a3_0x2f80e2,_0x2666db=[];for(const _0x54c950 of _0x4f12eb){const {jobInfo:_0x5d77fd,results:_0x5ca5ae}=_0x54c950;_0x5ca5ae&&_0x5ca5ae[_0x19bc9f(0x174)]['length']&&_0x2666db[_0x19bc9f(0x1a6)](..._0x5ca5ae['unprocessedRecords']);}if(_0x2666db[_0x19bc9f(0x194)]){const _0x2f4b01=await createTmpBulkBatchTable(),_0x181325=await loadTmpBulkBatchTable(_0x2f4b01,_0x2666db),_0x48db7f=await this[_0x19bc9f(0x182)](_0x2f4b01,_0x2666db[_0x19bc9f(0x194)]);return _0x48db7f;}else return null;}async[a3_0x2f80e2(0x182)](_0x2c57f3,_0x28a7e7){const _0x5a74fa=a3_0x2f80e2;console[_0x5a74fa(0x1e7)](this[_0x5a74fa(0x1e9)]+_0x5a74fa(0x197)+this[_0x5a74fa(0x1b7)][_0x5a74fa(0x1c6)]+_0x5a74fa(0x1d3)+_0x28a7e7+_0x5a74fa(0x1dc));const _0x2a1d40=await handleJobSubmission({'queue':this[_0x5a74fa(0x1da)],'jobType':_0x5a74fa(0x17a),'jobData':{...this[_0x5a74fa(0x1b7)],'bulkBatchTableName':_0x2c57f3,'batchRecordCount':_0x28a7e7,'isUnproccRetry':!![]},'enableRetries':![],'noJobName':!![]});return _0x2a1d40;}}module[a3_0x2f80e2(0x1b5)]=BulkUpdater;