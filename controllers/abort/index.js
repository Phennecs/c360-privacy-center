const a0_0x61ed25=a0_0x31c9;(function(_0xeff09e,_0x4cb16e){const _0xc0fc24=a0_0x31c9,_0x1b327e=_0xeff09e();while(!![]){try{const _0x3b6a03=-parseInt(_0xc0fc24(0x144))/0x1+-parseInt(_0xc0fc24(0x139))/0x2+parseInt(_0xc0fc24(0x14a))/0x3+-parseInt(_0xc0fc24(0x13c))/0x4+-parseInt(_0xc0fc24(0x146))/0x5+parseInt(_0xc0fc24(0x140))/0x6*(-parseInt(_0xc0fc24(0x14c))/0x7)+parseInt(_0xc0fc24(0x148))/0x8;if(_0x3b6a03===_0x4cb16e)break;else _0x1b327e['push'](_0x1b327e['shift']());}catch(_0x506d55){_0x1b327e['push'](_0x1b327e['shift']());}}}(a0_0x4e3a,0x7ab54));const {authHeroku}=require('../process'),getPendingJobCount=require(a0_0x61ed25(0x14b)),{handleJobSubmission}=require(a0_0x61ed25(0x149));async function abortHandler(_0x44c28f,_0x14dc21){const _0xf38a07=a0_0x61ed25;console[_0xf38a07(0x142)]('Abort\x20request\x20received:\x20req.body\x20=>',_0x44c28f[_0xf38a07(0x141)]);let _0x25edca=_0x44c28f[_0xf38a07(0x13b)]('Authorization'),_0x47c1e9=_0x44c28f['body'][_0xf38a07(0x13f)];const _0x2cd27e=await authHeroku(_0x25edca,null,_0x47c1e9,!![]);_0x14dc21[_0xf38a07(0x147)](_0x2cd27e[_0xf38a07(0x147)]==_0xf38a07(0x13a)?0xc8:0x194)[_0xf38a07(0x143)](_0x2cd27e)['end']();if(_0x2cd27e[_0xf38a07(0x147)]!==_0xf38a07(0x13a)){console[_0xf38a07(0x145)]('Abort\x20endpoint\x20Heroku\x20auth\x20failed!');return;}console[_0xf38a07(0x142)](_0xf38a07(0x14e));const {configQueue:_0xb828cd,nonPolicyQueues:_0x589035,policyQueue:_0x4ed82b,upStateQueue:_0x30ef82}=require('../../models/queue'),_0x5ef654=await getPendingJobCount([_0x4ed82b,..._0x589035,_0x30ef82]);if(!_0x5ef654){console[_0xf38a07(0x142)](_0xf38a07(0x13d));return;}else console['log'](_0xf38a07(0x13e));console['log']('Submitting\x20policy-aborter\x20job\x20for\x20policyName:\x20'+_0x47c1e9+'!');const _0x11fe54=await handleJobSubmission({'queue':_0xb828cd,'jobType':_0xf38a07(0x14d),'jobData':{'policyName':_0x47c1e9},'skipCounters':!![]});return;}function a0_0x31c9(_0x24135d,_0x4a0540){const _0x4e3ac3=a0_0x4e3a();return a0_0x31c9=function(_0x31c956,_0x72125d){_0x31c956=_0x31c956-0x138;let _0x111a10=_0x4e3ac3[_0x31c956];return _0x111a10;},a0_0x31c9(_0x24135d,_0x4a0540);}function a0_0x4e3a(){const _0x224250=['3135072pnZCdv','No\x20pending\x20jobs\x20or\x20queued\x20policies\x20detected,\x20no\x20need\x20to\x20abort\x20anything.','Pending\x20jobs\x20or\x20policies\x20were\x20detected,\x20some\x20policy\x20is\x20queued\x20or\x20running.\x20Proceeding\x20with\x20abort\x20job\x20submission\x20(if\x20matching\x20abort\x20criteria).','DeveloperName','6hynfec','body','log','json','480395SqWNEi','error','4014665hfJnhN','status','17825272dGbeJe','../worker/worker-utils/job-gateway','2397507GuRWZT','../worker/worker-utils/get-pending-job-count','117866IEIVLa','policy-aborter','Auth\x20passed,\x20proceeding.','exports','881564PIgAhK','Success','header'];a0_0x4e3a=function(){return _0x224250;};return a0_0x4e3a();}module[a0_0x61ed25(0x138)]=abortHandler;