const a45_0x2734a7=a45_0x2a4b;(function(_0x17bd16,_0x4fbea8){const _0x22c58c=a45_0x2a4b,_0x5a69c0=_0x17bd16();while(!![]){try{const _0x4dfebe=parseInt(_0x22c58c(0x14b))/0x1+parseInt(_0x22c58c(0x12e))/0x2+-parseInt(_0x22c58c(0x13c))/0x3+parseInt(_0x22c58c(0x143))/0x4*(-parseInt(_0x22c58c(0x136))/0x5)+parseInt(_0x22c58c(0x14c))/0x6+parseInt(_0x22c58c(0x134))/0x7*(-parseInt(_0x22c58c(0x147))/0x8)+-parseInt(_0x22c58c(0x146))/0x9*(-parseInt(_0x22c58c(0x137))/0xa);if(_0x4dfebe===_0x4fbea8)break;else _0x5a69c0['push'](_0x5a69c0['shift']());}catch(_0x26bd21){_0x5a69c0['push'](_0x5a69c0['shift']());}}}(a45_0x2a9f,0x881d4),require(a45_0x2734a7(0x133))['config']());function a45_0x2a4b(_0x337c31,_0x4f37ce){const _0x2a9f2f=a45_0x2a9f();return a45_0x2a4b=function(_0x2a4b3f,_0x1b27a9){_0x2a4b3f=_0x2a4b3f-0x125;let _0x383d15=_0x2a9f2f[_0x2a4b3f];return _0x383d15;},a45_0x2a4b(_0x337c31,_0x4f37ce);}const v8=require('v8'),throng=require('throng'),{maxJobsPerWorkerHeavyNetwork,workers}=require(a45_0x2734a7(0x139)),{BulkUpdateError}=require(a45_0x2734a7(0x129)),{handleJobCompleted,handleJobFailure,handleJobStalled}=require(a45_0x2734a7(0x152)),SalesforceModel=require('./models/salesforce'),DBModel=require(a45_0x2734a7(0x14f));function a45_0x2a9f(){const _0x45dc97=['./controllers/worker/worker-utils/phase-flag','bulk-updater','./controllers/worker/worker-utils/job-gateway','success','env','\x20job\x20started\x20-\x20jobId:','toFixed','Modify\x20Phase\x20Completion','./errors','./utils/memory-utils','policyName','name','Bulk\x20update\x20results:\x20','1665846nSsYsa','SIGINT','SIGTERM','\x20mb','enableEndPhaseRetries','dotenv','325738iTOjLc','data','190rLacsN','854350dOfBGW','objectName','./settings','process','MODIFY','1307478YkAErM','SPECIAL','error','executionId','The\x20Modification\x20Phase\x20has\x20failed\x20with\x20result:\x20','Throng\x20worker\x20id:\x20','\x20shutdown\x20invoked.','72764kXnDYL','./controllers/worker/bulk-updater','once','72ndfhLa','8NmubQt','stringify','log','\x20-\x20policyName:\x20','204395rtNJKe','62064vvDYQf','\x20executionId:\x20','completed','./models/database'];a45_0x2a9f=function(){return _0x45dc97;};return a45_0x2a9f();}if(!process[a45_0x2734a7(0x125)]['REDIS_URL']){console[a45_0x2734a7(0x149)]('REDIS_URL\x20is\x20not\x20set,\x20will\x20not\x20proceed!');return;}const {bulkQueue,modifyQueue,upStateQueue}=require('./models/queue'),BulkUpdater=require(a45_0x2734a7(0x144)),{insertPhaseFlag,PHASE_FLAG_TYPES}=require(a45_0x2734a7(0x150)),{runGC}=require(a45_0x2734a7(0x12a));throng({'worker':startWorker,'count':workers,'lifetime':Infinity,'grace':0x1388});async function startWorker(_0x27de95,_0x3136dc){const _0x408783=a45_0x2734a7,_0x3c25e0=v8['getHeapStatistics']();console[_0x408783(0x149)]('Throng\x20worker\x20started\x20with\x20id:\x20'+_0x27de95+'\x20\x20\x20maxHeapSize:\x20'+(_0x3c25e0['heap_size_limit']/0x400/0x400)[_0x408783(0x127)](0x0)+_0x408783(0x131)),process[_0x408783(0x145)](_0x408783(0x130),_0x3e1902),process['once'](_0x408783(0x12f),_0x3e1902);function _0x3e1902(){const _0x4f0e84=_0x408783;console['log'](_0x4f0e84(0x141)+_0x27de95+_0x4f0e84(0x142)),_0x3136dc();}const _0x210448=new DBModel(),_0x362021=new SalesforceModel();bulkQueue[_0x408783(0x13a)](maxJobsPerWorkerHeavyNetwork,async _0xbf526f=>{const _0x1c534d=_0x408783;_0xbf526f[_0x1c534d(0x12c)]=_0x1c534d(0x151),console[_0x1c534d(0x149)](_0xbf526f[_0x1c534d(0x12c)]+_0x1c534d(0x126)+_0xbf526f['id']+_0x1c534d(0x14a)+_0xbf526f[_0x1c534d(0x135)][_0x1c534d(0x12b)]+_0x1c534d(0x14d)+_0xbf526f['data']['executionId']+'\x20-\x20objectName:\x20'+_0xbf526f[_0x1c534d(0x135)][_0x1c534d(0x138)]);try{const _0x35080a=new BulkUpdater({'job':_0xbf526f,'salesforce':_0x362021,'db':_0x210448,'modifyQueue':modifyQueue,'bulkQueue':bulkQueue,'upStateQueue':upStateQueue}),_0x48b075=await _0x35080a['run']();console[_0x1c534d(0x149)](_0x1c534d(0x12d)+JSON[_0x1c534d(0x148)](_0x48b075));if(_0x48b075[_0x1c534d(0x132)]){const _0x28ebe1=await insertPhaseFlag(_0x210448,_0xbf526f[_0x1c534d(0x135)][_0x1c534d(0x13f)],_0x1c534d(0x13b),PHASE_FLAG_TYPES[_0x1c534d(0x13d)],'enableEndPhaseRetries');}if(!_0x48b075[_0x1c534d(0x153)])throw new BulkUpdateError(_0x48b075[_0x1c534d(0x13e)]);}catch(_0x420075){_0x420075 instanceof BulkUpdateError?console['error']('Bulk\x20update\x20error',_0x420075):console[_0x1c534d(0x13e)]('bulk-updater\x20error',_0x420075);throw _0x420075;}finally{runGC();}});for(const _0x40bd9b of[bulkQueue]){_0x40bd9b['on'](_0x408783(0x14e),async(_0x129039,_0x37e990)=>{await handleJobCompleted(_0x129039,_0x37e990);}),_0x40bd9b['on']('stalled',async _0x52032c=>{await handleJobStalled(_0x52032c);});}bulkQueue['on']('failed',async(_0x4a3df0,_0x706e80)=>{const _0x2e4d57=_0x408783;await handleJobFailure(_0x4a3df0,_0x706e80,_0x2e4d57(0x128),_0x2e4d57(0x140)+_0x706e80+'.');});}