'use strict';const a35_0x1805e5=a35_0x3396;(function(_0x51c89a,_0x3e90eb){const _0x38bdd9=a35_0x3396,_0x554c13=_0x51c89a();while(!![]){try{const _0x3054d0=-parseInt(_0x38bdd9(0x157))/0x1*(-parseInt(_0x38bdd9(0x159))/0x2)+-parseInt(_0x38bdd9(0x160))/0x3*(parseInt(_0x38bdd9(0x180))/0x4)+-parseInt(_0x38bdd9(0x174))/0x5+-parseInt(_0x38bdd9(0x172))/0x6*(-parseInt(_0x38bdd9(0x182))/0x7)+-parseInt(_0x38bdd9(0x170))/0x8+parseInt(_0x38bdd9(0x17e))/0x9*(-parseInt(_0x38bdd9(0x179))/0xa)+parseInt(_0x38bdd9(0x15c))/0xb;if(_0x3054d0===_0x3e90eb)break;else _0x554c13['push'](_0x554c13['shift']());}catch(_0x43ee82){_0x554c13['push'](_0x554c13['shift']());}}}(a35_0x2f85,0x8af92));function a35_0x2f85(){const _0x54a3fc=['header','1HcuVgm','../settings','1414934UZoJub','userInfo','SF_INSTANCE_URL','24749208aYTeMg','OAuth2','Error\x20attempting\x20to\x20authenticate\x20against\x20Salesforce\x20using\x20new\x20OAuth\x20credentials:\x20','jsforce','9qucDEC','/oauth2/configure\x20received!','log','update-cust-sf-oauth-vars','Submitting\x20update-cust-sf-oauth-vars\x20job.\x20SF_INSTANCE_URL\x20=>\x20','Unauthorized:\x20Missing\x20auth\x20header.','error','status','body','../controllers/worker/worker-utils/job-gateway','Authorization','post','../models/queue','Missing\x20auth\x20header\x20on\x20/configure\x20request.','Router','Heroku\x20auth\x20was\x20successful!\x20Proceeding...','7832128zyaGwI','accessToken','95766GgSZqI','json','1986020XHhgfq','/configure','redirectUri','loginUrl','refreshToken','10CkFSml','validateHerokuAuthHeader','Heroku\x20authentication\x20failed\x20on\x20/configure\x20request.','exports','authCode','9860121SWRRXQ','authorize','399248BbCYIg','instanceUrl','168USKJuM','clientId','Connection','message'];a35_0x2f85=function(){return _0x54a3fc;};return a35_0x2f85();}const express=require('express');function a35_0x3396(_0x3f2d3e,_0x38829a){const _0x2f8506=a35_0x2f85();return a35_0x3396=function(_0x339641,_0x523133){_0x339641=_0x339641-0x155;let _0x8f24b=_0x2f8506[_0x339641];return _0x8f24b;},a35_0x3396(_0x3f2d3e,_0x38829a);}let router=express[a35_0x1805e5(0x16e)]();const herokuModel=require('../models/heroku'),jsforce=require(a35_0x1805e5(0x15f)),{sfApiVersion}=require(a35_0x1805e5(0x158)),{handleJobSubmission}=require(a35_0x1805e5(0x169)),{configQueue}=require(a35_0x1805e5(0x16c)),heroku=new herokuModel();router[a35_0x1805e5(0x16b)](a35_0x1805e5(0x175),async function(_0x2c2b70,_0xac713d){const _0x2ff5ed=a35_0x1805e5;console[_0x2ff5ed(0x162)](_0x2ff5ed(0x161));const _0x4ba79c=_0x2c2b70[_0x2ff5ed(0x156)](_0x2ff5ed(0x16a));if(!_0x4ba79c)return console['error'](_0x2ff5ed(0x16d)),_0xac713d[_0x2ff5ed(0x167)](0x191)[_0x2ff5ed(0x173)]({'error':_0x2ff5ed(0x165)});const _0x880ab1=await heroku[_0x2ff5ed(0x17a)](_0x4ba79c);if(!_0x880ab1)return console[_0x2ff5ed(0x166)](_0x2ff5ed(0x17b)),_0xac713d[_0x2ff5ed(0x167)](0x191)[_0x2ff5ed(0x173)]({'error':'Unauthorized:\x20Heroku\x20authentication\x20failed.'});console[_0x2ff5ed(0x162)](_0x2ff5ed(0x16f)),console[_0x2ff5ed(0x162)](_0x2c2b70['body']);const _0x123be9=_0x2c2b70[_0x2ff5ed(0x168)][_0x2ff5ed(0x17d)],_0x3d0d77=_0x2c2b70[_0x2ff5ed(0x168)][_0x2ff5ed(0x183)],_0xaf693e=_0x2c2b70[_0x2ff5ed(0x168)][_0x2ff5ed(0x177)],_0x1ef1c4=_0x2c2b70[_0x2ff5ed(0x168)][_0x2ff5ed(0x176)],_0x21d87e=new jsforce[(_0x2ff5ed(0x15d))]({'loginUrl':_0xaf693e,'clientId':_0x3d0d77,'redirectUri':_0x1ef1c4}),_0x3d1c74=new jsforce[(_0x2ff5ed(0x184))]({'oauth2':_0x21d87e,'version':sfApiVersion});try{_0x3d1c74[_0x2ff5ed(0x17f)](_0x123be9,async function(_0x114e1a,_0x5c046a){const _0x3ca629=_0x2ff5ed;if(_0x114e1a){console[_0x3ca629(0x166)](_0x114e1a),_0xac713d[_0x3ca629(0x167)](0x191)[_0x3ca629(0x173)]({'received':!![],'authSuccessful':![],'configVarsSet':![],'error':_0x3ca629(0x15e)+_0x114e1a['message']});return;}if(!_0x3d1c74[_0x3ca629(0x171)]||!_0x3d1c74[_0x3ca629(0x178)]||!_0x3d1c74[_0x3ca629(0x181)]||!_0x3d1c74[_0x3ca629(0x15a)]){const _0x8a0ded='Access\x20token,\x20refresh\x20token,\x20instance\x20URL,\x20or\x20userInfo\x20object\x20were\x20not\x20obtained\x20from\x20OAuth\x20against\x20SF.\x20Something\x20is\x20wrong.';console[_0x3ca629(0x166)](_0x8a0ded),_0xac713d['status'](0x1f4)['json']({'received':!![],'authSuccessful':![],'configVarsSet':![],'error':_0x8a0ded});return;}const _0x1b1f63={'SF_LOGIN_URL':_0xaf693e,'SF_CLIENT_ID':_0x3d0d77,'SF_REDIRECT_URI':_0x1ef1c4,'SF_ACCESS_TOKEN':_0x3d1c74[_0x3ca629(0x171)],'SF_REFRESH_TOKEN':_0x3d1c74[_0x3ca629(0x178)],'SF_INSTANCE_URL':_0x3d1c74['instanceUrl'],'SF_LONG_ORG_ID':_0x3d1c74[_0x3ca629(0x15a)]['organizationId'],'SF_USER_ID':_0x3d1c74['userInfo']['id']};try{console[_0x3ca629(0x162)](_0x3ca629(0x164)+_0x1b1f63[_0x3ca629(0x15b)]),await handleJobSubmission({'queue':configQueue,'jobType':_0x3ca629(0x163),'jobData':{'tokenInfo':_0x1b1f63},'skipCounters':!![]}),_0xac713d[_0x3ca629(0x167)](0xc8)[_0x3ca629(0x173)]({'received':!![],'authSuccessful':!![],'configVarsSet':!![]});return;}catch(_0x329c09){const _0x38994f='Error\x20setting\x20heroku\x20config\x20vars.\x20'+_0x329c09[_0x3ca629(0x155)];console[_0x3ca629(0x166)](_0x38994f),_0xac713d[_0x3ca629(0x167)](0x1f4)[_0x3ca629(0x173)]({'received':!![],'authSuccessful':!![],'configVarsSet':![],'error':_0x38994f});return;}});}catch(_0x298736){console['error'](_0x298736),_0xac713d[_0x2ff5ed(0x167)](0x1f4)[_0x2ff5ed(0x173)]({'received':!![],'authSuccessful':![],'configVarsSet':![],'error':'Unexpected\x20error:\x20'+_0x298736[_0x2ff5ed(0x155)]});return;}}),module[a35_0x1805e5(0x17c)]=router;